======================================================== test session starts =========================================================
platform darwin -- Python 3.10.19, pytest-8.4.2, pluggy-1.6.0 -- /Users/gerardomayor/miniconda3/envs/apu_filter_env/bin/python
cachedir: .pytest_cache
rootdir: /Users/gerardomayor/Documents/estru_techos/apu_filter
configfile: pyproject.toml
collected 778 items                                                                                                                  

tests/test_app.py::TestSetupLogging::test_setup_logging_basic PASSED                                                           [  0%]
tests/test_app.py::TestSetupLogging::test_setup_logging_creates_log_directory PASSED                                           [  0%]
tests/test_app.py::TestSetupLogging::test_setup_logging_file_handler PASSED                                                    [  0%]
tests/test_app.py::TestSetupLogging::test_setup_logging_console_handler PASSED                                                 [  0%]
tests/test_app.py::TestSetupLogging::test_setup_logging_formatter PASSED                                                       [  0%]
tests/test_app.py::TestFileValidator::test_validate_file_valid_csv PASSED                                                      [  0%]
tests/test_app.py::TestFileValidator::test_validate_file_no_file PASSED                                                        [  0%]
tests/test_app.py::TestFileValidator::test_validate_file_empty_filename PASSED                                                 [  1%]
tests/test_app.py::TestFileValidator::test_validate_file_invalid_extension PASSED                                              [  1%]
tests/test_app.py::TestFileValidator::test_validate_file_allowed_extensions PASSED                                             [  1%]
tests/test_app.py::TestFileValidator::test_validate_file_too_large PASSED                                                      [  1%]
tests/test_app.py::TestFileValidator::test_validate_file_secure_filename PASSED                                                [  1%]
tests/test_app.py::TestAPUPresenter::test_process_apu_details_basic PASSED                                                     [  1%]
tests/test_app.py::TestAPUPresenter::test_process_apu_details_empty_raises_error PASSED                                        [  1%]
tests/test_app.py::TestAPUPresenter::test_process_apu_details_categories PASSED                                                [  1%]
tests/test_app.py::TestAPUPresenter::test_group_by_category PASSED                                                             [  2%]
tests/test_app.py::TestAPUPresenter::test_group_by_category_aggregation PASSED                                                 [  2%]
tests/test_app.py::TestAPUPresenter::test_organize_breakdown PASSED                                                            [  2%]
tests/test_app.py::TestAPUPresenter::test_process_apu_details_with_nan PASSED                                                  [  2%]
tests/test_app.py::TestAPUPresenter::test_process_apu_details_with_alerts PASSED                                               [  2%]
tests/test_app.py::TestDecorators::test_require_session_decorator_no_session PASSED                                            [  2%]
tests/test_app.py::TestDecorators::test_require_session_decorator_expired_session PASSED                                       [  2%]
tests/test_app.py::TestDecorators::test_require_session_decorator_valid_session PASSED                                         [  2%]
tests/test_app.py::TestDecorators::test_handle_errors_decorator_value_error PASSED                                             [  3%]
tests/test_app.py::TestDecorators::test_handle_errors_decorator_key_error PASSED                                               [  3%]
tests/test_app.py::TestDecorators::test_handle_errors_decorator_generic_error PASSED                                           [  3%]
tests/test_app.py::TestDecorators::test_handle_errors_decorator_success PASSED                                                 [  3%]
tests/test_app.py::TestContextManagers::test_temporary_upload_directory_creates_dir PASSED                                     [  3%]
tests/test_app.py::TestContextManagers::test_temporary_upload_directory_cleanup PASSED                                         [  3%]
tests/test_app.py::TestContextManagers::test_temporary_upload_directory_cleanup_on_error PASSED                                [  3%]
tests/test_app.py::TestContextManagers::test_temporary_upload_directory_multiple_files PASSED                                  [  3%]
tests/test_app.py::TestEndpoints::test_index_endpoint PASSED                                                                   [  4%]
tests/test_app.py::TestEndpoints::test_health_check_endpoint PASSED                                                            [  4%]
tests/test_app.py::TestEndpoints::test_upload_missing_files PASSED                                                             [  4%]
tests/test_app.py::TestEndpoints::test_upload_invalid_file PASSED                                                              [  4%]
tests/test_app.py::TestEndpoints::test_upload_successful PASSED                                                                [  4%]
tests/test_app.py::TestEndpoints::test_upload_processing_error PASSED                                                          [  4%]
tests/test_app.py::TestEndpoints::test_get_apu_detail_no_session PASSED                                                        [  4%]
tests/test_app.py::TestEndpoints::test_get_apu_detail_success PASSED                                                           [  5%]
tests/test_app.py::TestEndpoints::test_get_apu_detail_not_found PASSED                                                         [  5%]
tests/test_app.py::TestEndpoints::test_get_estimate_no_session PASSED                                                          [  5%]
tests/test_app.py::TestEndpoints::test_get_estimate_invalid_content_type PASSED                                                [  5%]
tests/test_app.py::TestEndpoints::test_get_estimate_no_params PASSED                                                           [  5%]
tests/test_app.py::TestEndpoints::test_get_estimate_success PASSED                                                             [  5%]
tests/test_app.py::TestErrorHandlers::test_404_handler PASSED                                                                  [  5%]
tests/test_app.py::TestErrorHandlers::test_413_handler PASSED                                                                  [  5%]
tests/test_app.py::TestErrorHandlers::test_500_handler PASSED                                                                  [  6%]
tests/test_app.py::TestMiddleware::test_before_request_logging PASSED                                                          [  6%]
tests/test_app.py::TestMiddleware::test_after_request_security_headers PASSED                                                  [  6%]
tests/test_app.py::TestMiddleware::test_after_request_cors_disabled PASSED                                                     [  6%]
tests/test_app.py::TestMiddleware::test_after_request_cors_enabled PASSED                                                      [  6%]
tests/test_app.py::TestSemanticSearch::test_load_semantic_search_success PASSED                                                [  6%]
tests/test_app.py::TestSemanticSearch::test_load_semantic_search_missing_files PASSED                                          [  6%]
tests/test_app.py::TestSemanticSearch::test_load_semantic_search_error_handling PASSED                                         [  6%]
tests/test_app.py::TestCreateApp::test_create_app_development PASSED                                                           [  7%]
tests/test_app.py::TestCreateApp::test_create_app_testing PASSED                                                               [  7%]
tests/test_app.py::TestCreateApp::test_create_app_production PASSED                                                            [  7%]
tests/test_app.py::TestCreateApp::test_create_app_config_loading PASSED                                                        [  7%]
tests/test_app.py::TestCreateApp::test_create_app_upload_folder_creation PASSED                                                [  7%]
tests/test_app.py::TestCreateApp::test_create_app_session_configuration PASSED                                                 [  7%]
tests/test_app.py::TestIntegration::test_full_workflow PASSED                                                                  [  7%]
tests/test_app.py::TestSecurity::test_sql_injection_attempt PASSED                                                             [  7%]
tests/test_app.py::TestSecurity::test_xss_attempt PASSED                                                                       [  8%]
tests/test_app.py::TestSecurity::test_path_traversal_attempt PASSED                                                            [  8%]
tests/test_app.py::TestConstants::test_session_timeout_constant PASSED                                                         [  8%]
tests/test_app.py::TestConstants::test_max_content_length_constant PASSED                                                      [  8%]
tests/test_app.py::TestConstants::test_allowed_extensions_constant PASSED                                                      [  8%]
tests/test_app.py::TestPerformance::test_health_check_response_time PASSED                                                     [  8%]
tests/test_app.py::TestPerformance::test_multiple_concurrent_requests PASSED                                                   [  8%]
tests/test_apu_processor.py::TestAPUProcessor::test_integration_with_calculate_unit_costs PASSED                               [  8%]
tests/test_apu_processor.py::TestAPUProcessor::test_process_all PASSED                                                         [  9%]
tests/test_apu_processor.py::TestAPUProcessor::test_process_with_comma_decimal_separator PASSED                                [  9%]
tests/test_clean_csv.py::TestCleaningStats::test_initialization PASSED                                                         [  9%]
tests/test_clean_csv.py::TestCleaningStats::test_record_written PASSED                                                         [  9%]
tests/test_clean_csv.py::TestCleaningStats::test_record_skip PASSED                                                            [  9%]
tests/test_clean_csv.py::TestCleaningStats::test_multiple_skip_reasons PASSED                                                  [  9%]
tests/test_clean_csv.py::TestValidations::test_nonexistent_input_file PASSED                                                   [  9%]
tests/test_clean_csv.py::TestValidations::test_input_is_directory PASSED                                                       [ 10%]
tests/test_clean_csv.py::TestValidations::test_empty_input_file PASSED                                                         [ 10%]
tests/test_clean_csv.py::TestValidations::test_output_already_exists_no_overwrite PASSED                                       [ 10%]
tests/test_clean_csv.py::TestValidations::test_output_already_exists_with_overwrite PASSED                                     [ 10%]
tests/test_clean_csv.py::TestValidations::test_nonexistent_output_directory PASSED                                             [ 10%]
tests/test_clean_csv.py::TestValidations::test_empty_delimiter PASSED                                                          [ 10%]
tests/test_clean_csv.py::TestValidations::test_multi_character_delimiter PASSED                                                [ 10%]
tests/test_clean_csv.py::TestValidations::test_same_input_output_file PASSED                                                   [ 10%]
tests/test_clean_csv.py::TestValidations::test_unusual_delimiter_warning PASSED                                                [ 11%]
tests/test_clean_csv.py::TestValidations::test_valid_delimiters_no_warning PASSED                                              [ 11%]
tests/test_clean_csv.py::TestProcessHeader::test_process_valid_header PASSED                                                   [ 11%]
tests/test_clean_csv.py::TestProcessHeader::test_empty_header_raises_error PASSED                                              [ 11%]
tests/test_clean_csv.py::TestProcessHeader::test_blank_header_raises_error PASSED                                              [ 11%]
tests/test_clean_csv.py::TestProcessHeader::test_duplicate_headers_warning PASSED                                              [ 11%]
tests/test_clean_csv.py::TestShouldSkipLine::test_valid_line_not_skipped PASSED                                                [ 11%]
tests/test_clean_csv.py::TestShouldSkipLine::test_empty_line_skipped PASSED                                                    [ 11%]
tests/test_clean_csv.py::TestShouldSkipLine::test_whitespace_line_skipped PASSED                                               [ 12%]
tests/test_clean_csv.py::TestShouldSkipLine::test_blank_fields_line_skipped PASSED                                             [ 12%]
tests/test_clean_csv.py::TestShouldSkipLine::test_comment_line_skipped PASSED                                                  [ 12%]
tests/test_clean_csv.py::TestShouldSkipLine::test_inconsistent_delimiters_strict_mode PASSED                                   [ 12%]
tests/test_clean_csv.py::TestShouldSkipLine::test_inconsistent_delimiters_non_strict_mode PASSED                               [ 12%]
tests/test_clean_csv.py::TestShouldSkipLine::test_comment_with_leading_spaces PASSED                                           [ 12%]
tests/test_clean_csv.py::TestCleanMethod::test_clean_preserves_original_format PASSED                                          [ 12%]
tests/test_clean_csv.py::TestCleanMethod::test_clean_problematic_csv PASSED                                                    [ 12%]
tests/test_clean_csv.py::TestCleanMethod::test_clean_with_comma_delimiter PASSED                                               [ 13%]
tests/test_clean_csv.py::TestCleanMethod::test_clean_header_only_csv PASSED                                                    [ 13%]
tests/test_clean_csv.py::TestCleanMethod::test_clean_non_strict_mode PASSED                                                    [ 13%]
tests/test_clean_csv.py::TestCleanMethod::test_statistics_accuracy PASSED                                                      [ 13%]
tests/test_clean_csv.py::TestErrorHandling::test_permission_denied_raises_ioerror PASSED                                       [ 13%]
tests/test_clean_csv.py::TestMainFunction::test_main_help PASSED                                                               [ 13%]
tests/test_clean_csv.py::TestMainFunction::test_main_success PASSED                                                            [ 13%]
tests/test_clean_csv.py::TestMainFunction::test_main_with_delimiter_option PASSED                                              [ 14%]
tests/test_clean_csv.py::TestMainFunction::test_main_with_overwrite_option PASSED                                              [ 14%]
tests/test_clean_csv.py::TestMainFunction::test_main_with_verbose_option PASSED                                                [ 14%]
tests/test_clean_csv.py::TestMainFunction::test_main_with_no_strict_option PASSED                                              [ 14%]
tests/test_clean_csv.py::TestMainFunction::test_main_file_not_found_error PASSED                                               [ 14%]
tests/test_clean_csv.py::TestMainFunction::test_main_keyboard_interrupt PASSED                                                 [ 14%]
tests/test_clean_csv.py::TestAdvancedIntegration::test_special_characters_in_data PASSED                                       [ 14%]
tests/test_clean_csv.py::TestAdvancedIntegration::test_mixed_line_endings PASSED                                               [ 14%]
tests/test_clean_csv.py::TestAdvancedIntegration::test_unicode_normalization PASSED                                            [ 15%]
tests/test_clean_csv.py::TestAdvancedIntegration::test_very_long_lines PASSED                                                  [ 15%]
tests/test_clean_csv.py::TestPerformance::test_large_file_processing PASSED                                                    [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_delimiters[;] PASSED                                                [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_delimiters[,] PASSED                                                [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_delimiters[\t] PASSED                                               [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_delimiters[|] PASSED                                                [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_encodings[utf-8] PASSED                                             [ 15%]
tests/test_clean_csv.py::TestConfiguration::test_different_encodings[latin-1] PASSED                                           [ 16%]
tests/test_clean_csv.py::TestConfiguration::test_different_encodings[cp1252] PASSED                                            [ 16%]
tests/test_data_loader.py::test_load_from_csv_success PASSED                                                                   [ 16%]
tests/test_data_loader.py::test_load_from_csv_file_not_found PASSED                                                            [ 16%]
tests/test_data_loader.py::test_load_from_csv_empty_error PASSED                                                               [ 16%]
tests/test_data_loader.py::test_load_from_csv_encoding_error PASSED                                                            [ 16%]
tests/test_data_loader.py::test_load_from_xlsx_single_sheet_success PASSED                                                     [ 16%]
tests/test_data_loader.py::test_load_from_xlsx_all_sheets_success PASSED                                                       [ 16%]
tests/test_data_loader.py::test_load_from_xlsx_file_not_found PASSED                                                           [ 17%]
tests/test_data_loader.py::test_load_from_xlsx_sheet_not_found PASSED                                                          [ 17%]
tests/test_data_loader.py::test_load_from_pdf_no_tables PASSED                                                                 [ 17%]
tests/test_data_loader.py::test_load_from_pdf_with_dirty_tables PASSED                                                         [ 17%]
tests/test_data_loader.py::test_load_from_pdf_with_table_settings PASSED                                                       [ 17%]
tests/test_data_loader.py::test_load_from_pdf_file_not_found PASSED                                                            [ 17%]
tests/test_data_loader.py::test_load_data_routes_to_csv PASSED                                                                 [ 17%]
tests/test_data_loader.py::test_load_data_routes_to_xlsx PASSED                                                                [ 17%]
tests/test_data_loader.py::test_load_data_routes_to_pdf PASSED                                                                 [ 18%]
tests/test_data_loader.py::test_load_data_unsupported_format PASSED                                                            [ 18%]
tests/test_data_loader.py::test_load_data_file_not_found PASSED                                                                [ 18%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__inmutable_input PASSED                          [ 18%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__integration_success PASSED                      [ 18%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__invalid_data_store_type PASSED                  [ 18%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__missing_apus_detail_key PASSED                  [ 18%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__missing_presupuesto_key PASSED                  [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__none_in_apus_detail PASSED                      [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__none_in_presupuesto PASSED                      [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_extreme_costs__extreme_cost PASSED                              [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_extreme_costs__inmutable_input PASSED                           [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_extreme_costs__non_numeric_value PASSED                         [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_extreme_costs__normal_cost PASSED                               [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__fuzzy_matching_enabled PASSED             [ 19%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__inmutable_input PASSED                    [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__missing_description PASSED                [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__no_fuzzy_available PASSED                 [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__present_description PASSED                [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__raw_insumos_df_missing_column PASSED      [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__raw_insumos_df_none PASSED                [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_zero_quantity_with_cost__inmutable_input PASSED                 [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_zero_quantity_with_cost__invalid_types PASSED                   [ 20%]
tests/test_data_validator.py::TestDataValidator::test_validate_zero_quantity_with_cost__non_recalculable PASSED                [ 21%]
tests/test_data_validator.py::TestDataValidator::test_validate_zero_quantity_with_cost__recalculable PASSED                    [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_initialization_valid_path PASSED                                 [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_diagnose_file_not_found PASSED                                   [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_diagnose_successful_run PASSED                                   [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_diagnose_line_stats_analysis PASSED                              [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_diagnose_key_pattern_detection PASSED                            [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_diagnose_returns_valid_structure PASSED                          [ 21%]
tests/test_diagnose_apus_file.py::TestAPUFileDiagnostic::test_generate_diagnostic_report_logs_output PASSED                    [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_initialization_valid_file PASSED                          [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_initialization_file_not_found PASSED                      [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_diagnose_successful_run PASSED                            [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_diagnose_no_groups_found PASSED                           [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_diagnose_mixed_quality_groups PASSED                      [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_diagnose_duplicate_groups PASSED                          [ 22%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_overall_confidence_high_for_good_file PASSED              [ 23%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_overall_confidence_low_for_bad_file PASSED                [ 23%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_recommendations_for_hierarchical_processing PASSED        [ 23%]
tests/test_diagnose_insumos_file.py::TestInsumosFileDiagnostic::test_main_function_integration PASSED                          [ 23%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_initialization_valid_file PASSED                  [ 23%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_initialization_file_not_found PASSED              [ 23%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_diagnose_successful_run PASSED                    [ 23%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_diagnose_inconsistent_columns PASSED              [ 23%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_diagnose_no_header PASSED                         [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_header_detection_with_offset PASSED               [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_comment_and_empty_line_handling PASSED            [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_total_line_detection PASSED                       [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_overall_confidence_calculation PASSED             [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_recommendations_generation PASSED                 [ 24%]
tests/test_diagnose_presupuesto_file.py::TestPresupuestoFileDiagnostic::test_main_function_integration PASSED                  [ 24%]
tests/test_estimator.py::test_find_best_semantic_match_success PASSED                                                          [ 24%]
tests/test_estimator.py::test_find_best_semantic_match_below_threshold PASSED                                                  [ 25%]
tests/test_estimator.py::test_calculate_estimate_uses_semantic_first PASSED                                                    [ 25%]
tests/test_estimator.py::test_calculate_estimate_fallback_to_keyword_on_semantic_failure PASSED                                [ 25%]
tests/test_estimator.py::test_calculate_estimate_no_semantic_artifacts PASSED                                                  [ 25%]
tests/test_generate_embeddings.py::TestDataValidator::test_validate_dataframe_success PASSED                                   [ 25%]
tests/test_generate_embeddings.py::TestDataValidator::test_validate_dataframe_missing_column_raises_error PASSED               [ 25%]
tests/test_generate_embeddings.py::TestDataValidator::test_validate_dataframe_removes_nulls PASSED                             [ 25%]
tests/test_generate_embeddings.py::TestEmbeddingGenerator::test_load_model_success PASSED                                      [ 25%]
tests/test_generate_embeddings.py::TestEmbeddingGenerator::test_load_model_failure_raises_error PASSED                         [ 26%]
tests/test_generate_embeddings.py::TestEmbeddingGenerator::test_generate_embeddings PASSED                                     [ 26%]
tests/test_generate_embeddings.py::TestEmbeddingGenerator::test_build_faiss_index PASSED                                       [ 26%]
tests/test_generate_embeddings.py::test_pipeline_run_integration PASSED                                                        [ 26%]
tests/test_generate_embeddings.py::test_pipeline_with_mocked_write PASSED                                                      [ 26%]
tests/test_models.py::TestMonteCarloConfig::test_default_initialization PASSED                                                 [ 26%]
tests/test_models.py::TestMonteCarloConfig::test_custom_initialization PASSED                                                  [ 26%]
tests/test_models.py::TestMonteCarloConfig::test_validation_num_simulations_type PASSED                                        [ 26%]
tests/test_models.py::TestMonteCarloConfig::test_validation_num_simulations_range PASSED                                       [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_volatility_type PASSED                                             [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_volatility_range PASSED                                            [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_thresholds_type PASSED                                             [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_thresholds_negative PASSED                                         [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_random_seed_type PASSED                                            [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_percentiles_type PASSED                                            [ 27%]
tests/test_models.py::TestMonteCarloConfig::test_validation_percentiles_values PASSED                                          [ 28%]
tests/test_models.py::TestSimulationResult::test_initialization PASSED                                                         [ 28%]
tests/test_models.py::TestSimulationResult::test_initialization_with_raw_results PASSED                                        [ 28%]
tests/test_models.py::TestSimulationResult::test_to_dict_without_raw PASSED                                                    [ 28%]
tests/test_models.py::TestSimulationResult::test_to_dict_with_raw PASSED                                                       [ 28%]
tests/test_models.py::TestSimulationResult::test_is_successful_true PASSED                                                     [ 28%]
tests/test_models.py::TestSimulationResult::test_is_successful_false PASSED                                                    [ 28%]
tests/test_models.py::TestSanitizeValue::test_sanitize_nan PASSED                                                              [ 28%]
tests/test_models.py::TestSanitizeValue::test_sanitize_inf PASSED                                                              [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_float PASSED                                                            [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_int PASSED                                                              [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_bool PASSED                                                             [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_string PASSED                                                           [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_list PASSED                                                             [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_tuple PASSED                                                            [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_dict PASSED                                                             [ 29%]
tests/test_models.py::TestSanitizeValue::test_sanitize_none PASSED                                                             [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[10-10] PASSED                                             [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[10.5-10.5] PASSED                                         [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[True-True] PASSED                                         [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[False-False] PASSED                                       [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[text-text] PASSED                                         [ 30%]
tests/test_models.py::TestSanitizeValue::test_sanitize_various_types[value5-expected5] PASSED                                  [ 30%]
tests/test_models.py::TestValidateAPUDataStructure::test_validate_valid_data PASSED                                            [ 30%]
tests/test_models.py::TestValidateAPUDataStructure::test_validate_not_a_list PASSED                                            [ 31%]
tests/test_models.py::TestValidateAPUDataStructure::test_validate_empty_list PASSED                                            [ 31%]
tests/test_models.py::TestValidateAPUDataStructure::test_validate_not_all_dicts PASSED                                         [ 31%]
tests/test_models.py::TestValidateAPUDataStructure::test_validate_logs_errors PASSED                                           [ 31%]
tests/test_models.py::TestEstimateMemoryUsage::test_estimate_small_simulation PASSED                                           [ 31%]
tests/test_models.py::TestEstimateMemoryUsage::test_estimate_large_simulation PASSED                                           [ 31%]
tests/test_models.py::TestEstimateMemoryUsage::test_estimate_returns_int PASSED                                                [ 31%]
tests/test_models.py::TestEstimateMemoryUsage::test_estimate_zero_simulations PASSED                                           [ 32%]
tests/test_models.py::TestEstimateMemoryUsage::test_estimate_zero_apus PASSED                                                  [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInitialization::test_initialization_default PASSED                                [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInitialization::test_initialization_custom_config PASSED                          [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInitialization::test_initialization_without_logger PASSED                         [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInitialization::test_initialization_sets_random_seed PASSED                       [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInputValidation::test_validate_input_success PASSED                               [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInputValidation::test_validate_input_not_list PASSED                              [ 32%]
tests/test_models.py::TestMonteCarloSimulatorInputValidation::test_validate_input_empty_list PASSED                            [ 33%]
tests/test_models.py::TestMonteCarloSimulatorInputValidation::test_validate_input_not_dicts PASSED                             [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_success PASSED                                 [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_missing_columns PASSED                         [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_converts_strings PASSED                        [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_filters_zeros PASSED                           [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_filters_nan PASSED                             [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_calculates_base_cost PASSED                    [ 33%]
tests/test_models.py::TestMonteCarloSimulatorDataPreparation::test_prepare_data_with_threshold PASSED                          [ 34%]
tests/test_models.py::TestMonteCarloSimulatorMemoryCheck::test_check_memory_small_simulation PASSED                            [ 34%]
tests/test_models.py::TestMonteCarloSimulatorMemoryCheck::test_check_memory_warns_large_simulation PASSED                      [ 34%]
tests/test_models.py::TestMonteCarloSimulatorMemoryCheck::test_check_memory_raises_on_excessive PASSED                         [ 34%]
tests/test_models.py::TestMonteCarloSimulatorExecution::test_execute_simulation_success PASSED                                 [ 34%]
tests/test_models.py::TestMonteCarloSimulatorExecution::test_execute_simulation_reproducible PASSED                            [ 34%]
tests/test_models.py::TestMonteCarloSimulatorExecution::test_execute_simulation_truncates_negatives PASSED                     [ 34%]
tests/test_models.py::TestMonteCarloSimulatorExecution::test_execute_simulation_allows_negatives PASSED                        [ 34%]
tests/test_models.py::TestMonteCarloSimulatorExecution::test_execute_simulation_handles_invalid_results PASSED                 [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_basic PASSED                                [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_percentiles PASSED                          [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_confidence_interval PASSED                  [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_coefficient_variation PASSED                [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_cv_zero_mean PASSED                         [ 35%]
tests/test_models.py::TestMonteCarloSimulatorStatistics::test_calculate_statistics_custom_percentiles PASSED                   [ 35%]
tests/test_models.py::TestMonteCarloSimulatorMetadata::test_create_metadata_complete PASSED                                    [ 35%]
tests/test_models.py::TestMonteCarloSimulatorMetadata::test_create_metadata_with_discarded PASSED                              [ 36%]
tests/test_models.py::TestMonteCarloSimulatorMetadata::test_create_metadata_base_costs PASSED                                  [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_success PASSED                                   [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_logs_info PASSED                                 [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_no_valid_data PASSED                             [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_invalid_input_type PASSED                        [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_empty_list PASSED                                [ 36%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_missing_columns PASSED                           [ 37%]
tests/test_models.py::TestMonteCarloSimulatorIntegration::test_run_simulation_handles_exceptions PASSED                        [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_success PASSED                                   [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_default_params PASSED                            [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_invalid_simulations PASSED                       [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_invalid_volatility PASSED                        [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_no_valid_data PASSED                             [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_with_logging PASSED                              [ 37%]
tests/test_models.py::TestRunMonteCarloSimulationLegacy::test_legacy_function_returns_correct_structure PASSED                 [ 38%]
tests/test_models.py::TestEdgeCases::test_single_apu_item PASSED                                                               [ 38%]
tests/test_models.py::TestEdgeCases::test_very_small_values PASSED                                                             [ 38%]
tests/test_models.py::TestEdgeCases::test_very_large_values PASSED                                                             [ 38%]
tests/test_models.py::TestEdgeCases::test_zero_volatility PASSED                                                               [ 38%]
tests/test_models.py::TestEdgeCases::test_max_volatility PASSED                                                                [ 38%]
tests/test_models.py::TestEdgeCases::test_all_identical_values PASSED                                                          [ 38%]
tests/test_models.py::TestEdgeCases::test_mixed_scales PASSED                                                                  [ 38%]
tests/test_models.py::TestPerformance::test_large_dataset PASSED                                                               [ 39%]
tests/test_models.py::TestPerformance::test_many_simulations PASSED                                                            [ 39%]
tests/test_models.py::TestPerformance::test_extreme_load PASSED                                                                [ 39%]
tests/test_models.py::TestParametrized::test_various_simulation_counts[100] PASSED                                             [ 39%]
tests/test_models.py::TestParametrized::test_various_simulation_counts[500] PASSED                                             [ 39%]
tests/test_models.py::TestParametrized::test_various_simulation_counts[1000] PASSED                                            [ 39%]
tests/test_models.py::TestParametrized::test_various_simulation_counts[5000] PASSED                                            [ 39%]
tests/test_models.py::TestParametrized::test_various_volatilities[0.0] PASSED                                                  [ 39%]
tests/test_models.py::TestParametrized::test_various_volatilities[0.05] PASSED                                                 [ 40%]
tests/test_models.py::TestParametrized::test_various_volatilities[0.1] PASSED                                                  [ 40%]
tests/test_models.py::TestParametrized::test_various_volatilities[0.25] PASSED                                                 [ 40%]
tests/test_models.py::TestParametrized::test_various_volatilities[0.5] PASSED                                                  [ 40%]
tests/test_models.py::TestParametrized::test_various_volatilities[1.0] PASSED                                                  [ 40%]
tests/test_models.py::TestParametrized::test_various_cost_thresholds[0.0] PASSED                                               [ 40%]
tests/test_models.py::TestParametrized::test_various_cost_thresholds[100.0] PASSED                                             [ 40%]
tests/test_models.py::TestParametrized::test_various_cost_thresholds[1000.0] PASSED                                            [ 41%]
tests/test_models.py::TestParametrized::test_various_cost_thresholds[10000.0] PASSED                                           [ 41%]
tests/test_models.py::TestParametrized::test_various_random_seeds[None] PASSED                                                 [ 41%]
tests/test_models.py::TestParametrized::test_various_random_seeds[0] PASSED                                                    [ 41%]
tests/test_models.py::TestParametrized::test_various_random_seeds[42] PASSED                                                   [ 41%]
tests/test_models.py::TestParametrized::test_various_random_seeds[12345] PASSED                                                [ 41%]
tests/test_models.py::TestParametrized::test_various_random_seeds[99999] PASSED                                                [ 41%]
tests/test_models.py::TestReproducibility::test_same_seed_same_results PASSED                                                  [ 41%]
tests/test_models.py::TestReproducibility::test_different_seed_different_results PASSED                                        [ 42%]
tests/test_models.py::TestAdditionalCoverage::test_create_no_data_result PASSED                                                [ 42%]
tests/test_models.py::TestAdditionalCoverage::test_simulation_result_to_dict_comprehensive PASSED                              [ 42%]
tests/test_models.py::TestAdditionalCoverage::test_sanitize_complex_values PASSED                                              [ 42%]
tests/test_models.py::TestAdditionalCoverage::test_default_logger_creation PASSED                                              [ 42%]
tests/test_models.py::TestAdditionalCoverage::test_config_post_init_sets_percentiles PASSED                                    [ 42%]
tests/test_models.py::TestFullIntegration::test_complete_workflow PASSED                                                       [ 42%]
tests/test_models.py::TestFullIntegration::test_workflow_with_data_issues PASSED                                               [ 42%]
tests/test_models.py::TestFullIntegration::test_legacy_to_modern_api_equivalence PASSED                                        [ 43%]
tests/test_presenters.py::TestAPUPresenterInitialization::test_initialization_with_logger PASSED                               [ 43%]
tests/test_presenters.py::TestAPUPresenterInitialization::test_initialization_with_custom_config PASSED                        [ 43%]
tests/test_presenters.py::TestAPUPresenterInitialization::test_initialization_without_logger_raises_error PASSED               [ 43%]
tests/test_presenters.py::TestAPUPresenterInitialization::test_initialization_with_default_config PASSED                       [ 43%]
tests/test_presenters.py::TestInputValidation::test_validate_inputs_success PASSED                                             [ 43%]
tests/test_presenters.py::TestInputValidation::test_validate_inputs_not_a_list PASSED                                          [ 43%]
tests/test_presenters.py::TestInputValidation::test_validate_inputs_empty_list PASSED                                          [ 43%]
tests/test_presenters.py::TestInputValidation::test_validate_inputs_not_dict_elements PASSED                                   [ 44%]
tests/test_presenters.py::TestInputValidation::test_validate_inputs_invalid_apu_code PASSED                                    [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_replaces_nan_with_none PASSED                                    [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_replaces_inf_with_none PASSED                                    [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_strips_whitespace_from_strings PASSED                            [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_converts_numeric_columns PASSED                                  [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_warns_about_negative_values PASSED                               [ 44%]
tests/test_presenters.py::TestDataSanitization::test_sanitize_does_not_modify_original PASSED                                  [ 44%]
tests/test_presenters.py::TestSchemaValidation::test_validate_schema_success PASSED                                            [ 45%]
tests/test_presenters.py::TestSchemaValidation::test_validate_schema_missing_columns PASSED                                    [ 45%]
tests/test_presenters.py::TestSchemaValidation::test_validate_schema_logs_success PASSED                                       [ 45%]
tests/test_presenters.py::TestAggregation::test_group_by_category_consolidates_items PASSED                                    [ 45%]
tests/test_presenters.py::TestAggregation::test_group_by_category_processes_all_categories PASSED                              [ 45%]
tests/test_presenters.py::TestAggregation::test_group_by_category_empty_dataframe PASSED                                       [ 45%]
tests/test_presenters.py::TestAggregation::test_group_by_category_with_alerts PASSED                                           [ 45%]
tests/test_presenters.py::TestAggregation::test_aggregate_price_single_price PASSED                                            [ 46%]
tests/test_presenters.py::TestAggregation::test_aggregate_price_multiple_prices_warning PASSED                                 [ 46%]
tests/test_presenters.py::TestAggregation::test_aggregate_price_empty_series PASSED                                            [ 46%]
tests/test_presenters.py::TestAggregation::test_validate_consistency_single_value PASSED                                       [ 46%]
tests/test_presenters.py::TestAggregation::test_validate_consistency_multiple_values_warning PASSED                            [ 46%]
tests/test_presenters.py::TestAggregation::test_validate_consistency_empty_series PASSED                                       [ 46%]
tests/test_presenters.py::TestAggregation::test_aggregate_alerts_concatenates_unique PASSED                                    [ 46%]
tests/test_presenters.py::TestAggregation::test_aggregate_alerts_empty_series PASSED                                           [ 46%]
tests/test_presenters.py::TestBreakdownOrganization::test_organize_breakdown_groups_by_category PASSED                         [ 47%]
tests/test_presenters.py::TestBreakdownOrganization::test_organize_breakdown_handles_missing_category PASSED                   [ 47%]
tests/test_presenters.py::TestBreakdownOrganization::test_organize_breakdown_empty_list PASSED                                 [ 47%]
tests/test_presenters.py::TestBreakdownOrganization::test_organize_breakdown_custom_default_category PASSED                    [ 47%]
tests/test_presenters.py::TestMetadataCalculation::test_calculate_metadata_success PASSED                                      [ 47%]
tests/test_presenters.py::TestMetadataCalculation::test_calculate_metadata_total_value PASSED                                  [ 47%]
tests/test_presenters.py::TestMetadataCalculation::test_calculate_metadata_handles_none_values PASSED                          [ 47%]
tests/test_presenters.py::TestMetadataCalculation::test_calculate_metadata_empty_processed_items PASSED                        [ 47%]
tests/test_presenters.py::TestProcessAPUDetailsIntegration::test_process_apu_details_success PASSED                            [ 48%]
tests/test_presenters.py::TestProcessAPUDetailsIntegration::test_process_apu_details_with_alerts PASSED                        [ 48%]
tests/test_presenters.py::TestProcessAPUDetailsIntegration::test_process_apu_details_sanitizes_data PASSED                     [ 48%]
tests/test_presenters.py::TestProcessAPUDetailsIntegration::test_process_apu_details_logs_processing PASSED                    [ 48%]
tests/test_presenters.py::TestProcessAPUDetailsIntegration::test_process_apu_details_handles_whitespace PASSED                 [ 48%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_empty_list_raises_error PASSED                                  [ 48%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_invalid_type_raises_error PASSED                                [ 48%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_missing_columns_raises_error PASSED                             [ 48%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_invalid_apu_code_raises_error PASSED                            [ 49%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_handles_category_processing_error PASSED                        [ 49%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_all_categories_nan PASSED                                       [ 49%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_with_inconsistent_prices PASSED                                 [ 49%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_with_negative_values_warns PASSED                               [ 49%]
tests/test_presenters.py::TestEdgeCasesAndErrors::test_process_dataframe_creation_error PASSED                                 [ 49%]
tests/test_presenters.py::TestAPUProcessingConfig::test_config_default_values PASSED                                           [ 49%]
tests/test_presenters.py::TestAPUProcessingConfig::test_config_custom_values PASSED                                            [ 50%]
tests/test_presenters.py::TestAPUProcessingConfig::test_config_required_columns_includes_essentials PASSED                     [ 50%]
tests/test_presenters.py::TestAPUProcessingConfig::test_config_numeric_columns_includes_essentials PASSED                      [ 50%]
tests/test_presenters.py::TestPerformance::test_process_large_dataset PASSED                                                   [ 50%]
tests/test_presenters.py::TestPerformance::test_process_many_duplicate_items PASSED                                            [ 50%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[] PASSED                                                    [ 50%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[   ] PASSED                                                 [ 50%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[None] PASSED                                                [ 50%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[123] PASSED                                                 [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[invalid_apu_code4] PASSED                                   [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_codes[invalid_apu_code5] PASSED                                   [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[string] PASSED                                      [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[123] PASSED                                         [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[None] PASSED                                        [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[invalid_details3] PASSED                            [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[invalid_details4] PASSED                            [ 51%]
tests/test_presenters.py::TestParametrized::test_invalid_apu_details_types[invalid_details5] PASSED                            [ 52%]
tests/test_presenters.py::TestParametrized::test_sanitize_special_values[nan] PASSED                                           [ 52%]
tests/test_presenters.py::TestParametrized::test_sanitize_special_values[inf] PASSED                                           [ 52%]
tests/test_presenters.py::TestParametrized::test_sanitize_special_values[-inf] PASSED                                          [ 52%]
tests/test_presenters.py::TestParametrized::test_sanitize_special_values[None] PASSED                                          [ 52%]
tests/test_presenters.py::TestParametrized::test_strip_whitespace_variations[  hello  -hello] PASSED                           [ 52%]
tests/test_presenters.py::TestParametrized::test_strip_whitespace_variations[world  -world] PASSED                             [ 52%]
tests/test_presenters.py::TestParametrized::test_strip_whitespace_variations[  test-test] PASSED                               [ 52%]
tests/test_presenters.py::TestParametrized::test_strip_whitespace_variations[no-space-no-space] PASSED                         [ 53%]
tests/test_presenters.py::TestParametrized::test_strip_whitespace_variations[  multiple   spaces  -multiple   spaces] PASSED   [ 53%]
tests/test_presenters.py::TestAdditionalCoverage::test_create_dataframe_exception_handling PASSED                              [ 53%]
tests/test_presenters.py::TestAdditionalCoverage::test_create_dataframe_results_empty PASSED                                   [ 53%]
tests/test_presenters.py::TestAdditionalCoverage::test_process_unexpected_exception PASSED                                     [ 53%]
tests/test_presenters.py::TestAdditionalCoverage::test_metadata_reduction_rate_calculation PASSED                              [ 53%]
tests/test_presenters.py::TestAdditionalCoverage::test_aggregate_alerts_with_empty_strings PASSED                              [ 53%]
tests/test_procesador_csv.py::TestColumnNames::test_column_names_are_strings PASSED                                            [ 53%]
tests/test_procesador_csv.py::TestColumnNames::test_no_duplicate_column_names PASSED                                           [ 54%]
tests/test_procesador_csv.py::TestProcessingThresholds::test_custom_thresholds PASSED                                          [ 54%]
tests/test_procesador_csv.py::TestProcessingThresholds::test_default_thresholds PASSED                                         [ 54%]
tests/test_procesador_csv.py::TestDataValidator::test_detect_and_log_duplicates_no_duplicates PASSED                           [ 54%]
tests/test_procesador_csv.py::TestDataValidator::test_detect_and_log_duplicates_with_duplicates PASSED                         [ 54%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_dataframe_none PASSED                                           [ 54%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_dataframe_not_empty_failure PASSED                              [ 54%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_dataframe_not_empty_success PASSED                              [ 55%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_numeric_range_failure PASSED                                    [ 55%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_numeric_range_success PASSED                                    [ 55%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_required_columns_failure PASSED                                 [ 55%]
tests/test_procesador_csv.py::TestDataValidator::test_validate_required_columns_success PASSED                                 [ 55%]
tests/test_procesador_csv.py::TestFileValidator::test_validate_file_exists_failure PASSED                                      [ 55%]
tests/test_procesador_csv.py::TestFileValidator::test_validate_file_exists_success PASSED                                      [ 55%]
tests/test_procesador_csv.py::TestFileValidator::test_validate_file_is_directory PASSED                                        [ 55%]
tests/test_procesador_csv.py::TestPresupuestoProcessor::test_process_invalid_file PASSED                                       [ 56%]
tests/test_procesador_csv.py::TestPresupuestoProcessor::test_process_success_with_phantom_rows PASSED                          [ 56%]
tests/test_procesador_csv.py::TestPresupuestoProcessor::test_process_with_duplicates PASSED                                    [ 56%]
tests/test_procesador_csv.py::TestPresupuestoProcessor::test_process_with_single_digit_item PASSED                             [ 56%]
tests/test_procesador_csv.py::TestCleanPhantomRows::test_clean_delimiter_only_rows PASSED                                      [ 56%]
tests/test_procesador_csv.py::TestCleanPhantomRows::test_clean_empty_string_rows PASSED                                        [ 56%]
tests/test_procesador_csv.py::TestCleanPhantomRows::test_clean_fully_nan_rows PASSED                                           [ 56%]
tests/test_procesador_csv.py::TestCleanPhantomRows::test_clean_no_alphanumeric_content PASSED                                  [ 56%]
tests/test_procesador_csv.py::TestInsumosProcessor::test_parse_file_structure PASSED                                           [ 57%]
tests/test_procesador_csv.py::TestInsumosProcessor::test_process_success PASSED                                                [ 57%]
tests/test_procesador_csv.py::TestInsumosProcessor::test_process_with_duplicates PASSED                                        [ 57%]
tests/test_procesador_csv.py::TestAPUCostCalculator::test_calculate_complete_flow PASSED                                       [ 57%]
tests/test_procesador_csv.py::TestAPUCostCalculator::test_classify_apus_instalacion PASSED                                     [ 57%]
tests/test_procesador_csv.py::TestAPUCostCalculator::test_classify_apus_obra_completa PASSED                                   [ 57%]
tests/test_procesador_csv.py::TestAPUCostCalculator::test_classify_apus_suministro PASSED                                      [ 57%]
tests/test_procesador_csv.py::TestAPUCostCalculator::test_detect_cost_outliers PASSED                                          [ 57%]
tests/test_procesador_csv.py::TestDataMerger::test_merge_apus_with_insumos_success PASSED                                      [ 58%]
tests/test_procesador_csv.py::TestDataMerger::test_merge_apus_without_normalized_desc PASSED                                   [ 58%]
tests/test_procesador_csv.py::TestDataMerger::test_merge_with_presupuesto_duplicates PASSED                                    [ 58%]
tests/test_procesador_csv.py::TestDataMerger::test_merge_with_presupuesto_success PASSED                                       [ 58%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_build_processed_apus_dataframe PASSED                               [ 58%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_calculate_insumo_costs PASSED                                       [ 58%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_calculate_total_costs PASSED                                        [ 58%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_calculate_total_costs_exceeds_threshold PASSED                      [ 58%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_group_and_split_description PASSED                                  [ 59%]
tests/test_procesador_csv.py::TestAuxiliaryFunctions::test_synchronize_data_sources PASSED                                     [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_apu_load_failure_triggers_diagnostic PASSED [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_custom_thresholds PASSED                  [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_empty_presupuesto PASSED                  [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_file_not_found PASSED                     [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_merge_error PASSED                        [ 59%]
tests/test_procesador_csv.py::TestProcessAllFilesIntegration::test_process_all_files_success PASSED                            [ 60%]
tests/test_procesador_csv.py::TestEdgeCases::test_empty_insumos_group PASSED                                                   [ 60%]
tests/test_procesador_csv.py::TestEdgeCases::test_negative_costs PASSED                                                        [ 60%]
tests/test_procesador_csv.py::TestEdgeCases::test_special_characters_in_descriptions PASSED                                    [ 60%]
tests/test_procesador_csv.py::TestEdgeCases::test_very_long_descriptions PASSED                                                [ 60%]
tests/test_procesador_csv.py::TestEdgeCases::test_zero_quantities PASSED                                                       [ 60%]
tests/test_report_parser_crudo.py::TestParserConfig::test_default_config_creation PASSED                                       [ 60%]
tests/test_report_parser_crudo.py::TestParserConfig::test_custom_config_creation PASSED                                        [ 60%]
tests/test_report_parser_crudo.py::TestAPUContext::test_valid_apu_context_creation PASSED                                      [ 61%]
tests/test_report_parser_crudo.py::TestAPUContext::test_apu_context_normalization PASSED                                       [ 61%]
tests/test_report_parser_crudo.py::TestAPUContext::test_empty_apu_code_raises_error PASSED                                     [ 61%]
tests/test_report_parser_crudo.py::TestAPUContext::test_is_valid_property PASSED                                               [ 61%]
tests/test_report_parser_crudo.py::TestReportParserInitialization::test_valid_file_initialization PASSED                       [ 61%]
tests/test_report_parser_crudo.py::TestReportParserInitialization::test_file_not_found_raises_error PASSED                     [ 61%]
tests/test_report_parser_crudo.py::TestReportParserInitialization::test_directory_path_raises_error PASSED                     [ 61%]
tests/test_report_parser_crudo.py::TestReportParserInitialization::test_empty_file_raises_error PASSED                         [ 61%]
tests/test_report_parser_crudo.py::TestFileReading::test_read_utf8_file PASSED                                                 [ 62%]
tests/test_report_parser_crudo.py::TestFileReading::test_read_latin1_file PASSED                                               [ 62%]
tests/test_report_parser_crudo.py::TestFileReading::test_all_encodings_fail PASSED                                             [ 62%]
tests/test_report_parser_crudo.py::TestCompleteParsing::test_parse_lines_format PASSED                                         [ 62%]
tests/test_report_parser_crudo.py::TestCompleteParsing::test_parse_invalid_content PASSED                                      [ 62%]
tests/test_report_parser_crudo.py::TestCompleteParsing::test_parse_already_parsed PASSED                                       [ 62%]
tests/test_report_parser_crudo.py::TestEdgeCases::test_only_whitespace_file PASSED                                             [ 62%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_basic PASSED                                                     [ 62%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_case_insensitive PASSED                                          [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_with_spaces PASSED                                               [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_none PASSED                                                      [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_empty_string PASSED                                              [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_not_in_map PASSED                                                [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_time_units PASSED                                                [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_mass_units PASSED                                                [ 63%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_volume_units PASSED                                              [ 64%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_area_units PASSED                                                [ 64%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_transport_units PASSED                                           [ 64%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_cache PASSED                                                     [ 64%]
tests/test_schemas.py::TestNormalizeUnit::test_normalize_unit_invalid_type PASSED                                              [ 64%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_basic PASSED                                       [ 64%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_accents PASSED                                     [ 64%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_multiple_spaces PASSED                             [ 64%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_special_chars PASSED                               [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_leading_trailing_spaces PASSED                     [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_none PASSED                                        [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_empty_string PASSED                                [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_numbers PASSED                                     [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_parentheses PASSED                                 [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_cache PASSED                                       [ 65%]
tests/test_schemas.py::TestNormalizeDescription::test_normalize_description_invalid_type PASSED                                [ 65%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_basic PASSED                                                 [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_uppercase PASSED                                             [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_with_spaces PASSED                                           [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_special_chars PASSED                                         [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_preserve_valid_chars PASSED                                  [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_none_raises_error PASSED                                     [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_empty_raises_error PASSED                                    [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_too_long_raises_error PASSED                                 [ 66%]
tests/test_schemas.py::TestNormalizeCodigo::test_normalize_codigo_cache PASSED                                                 [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_valid_int PASSED                                       [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_valid_float PASSED                                     [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_decimal PASSED                                         [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_zero PASSED                                            [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_negative_raises_error PASSED                           [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_with_min_value PASSED                                  [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_with_max_value PASSED                                  [ 67%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_with_range PASSED                                      [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_invalid_type PASSED                                    [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_nan_raises_error PASSED                                [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_non_negative_inf_raises_error PASSED                                [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_positive_valid PASSED                                               [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_positive_zero_raises_error PASSED                                   [ 68%]
tests/test_schemas.py::TestNumericValidator::test_validate_positive_negative_raises_error PASSED                               [ 68%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_valid PASSED                                               [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_with_spaces PASSED                                         [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_empty_raises_error PASSED                                  [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_whitespace_raises_error PASSED                             [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_invalid_type_raises_error PASSED                           [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_with_max_length PASSED                                     [ 69%]
tests/test_schemas.py::TestStringValidator::test_validate_non_empty_none_raises_error PASSED                                   [ 69%]
tests/test_schemas.py::TestTipoInsumo::test_tipo_insumo_values PASSED                                                          [ 69%]
tests/test_schemas.py::TestTipoInsumo::test_from_string_valid PASSED                                                           [ 70%]
tests/test_schemas.py::TestTipoInsumo::test_from_string_with_spaces PASSED                                                     [ 70%]
tests/test_schemas.py::TestTipoInsumo::test_from_string_already_enum PASSED                                                    [ 70%]
tests/test_schemas.py::TestTipoInsumo::test_from_string_invalid_raises_error PASSED                                            [ 70%]
tests/test_schemas.py::TestTipoInsumo::test_get_valid_values PASSED                                                            [ 70%]
tests/test_schemas.py::TestInsumoProcesado::test_create_valid_insumo PASSED                                                    [ 70%]
tests/test_schemas.py::TestInsumoProcesado::test_normalization_in_post_init PASSED                                             [ 70%]
tests/test_schemas.py::TestInsumoProcesado::test_description_normalization PASSED                                              [ 70%]
tests/test_schemas.py::TestInsumoProcesado::test_tipo_categoria_sync PASSED                                                    [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_empty_codigo_raises_error PASSED                                              [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_empty_descripcion_raises_error PASSED                                         [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_negative_cantidad_raises_error PASSED                                         [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_negative_precio_raises_error PASSED                                           [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_valor_total_consistency_warning PASSED                                        [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_to_dict PASSED                                                                [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_validate_method PASSED                                                        [ 71%]
tests/test_schemas.py::TestInsumoProcesado::test_repr PASSED                                                                   [ 72%]
tests/test_schemas.py::TestManoDeObra::test_create_valid_mano_obra PASSED                                                      [ 72%]
tests/test_schemas.py::TestManoDeObra::test_rendimiento_required PASSED                                                        [ 72%]
tests/test_schemas.py::TestManoDeObra::test_rendimiento_cantidad_consistency PASSED                                            [ 72%]
tests/test_schemas.py::TestManoDeObra::test_expected_units_warning PASSED                                                      [ 72%]
tests/test_schemas.py::TestManoDeObra::test_jornal_validation PASSED                                                           [ 72%]
tests/test_schemas.py::TestManoDeObra::test_jornal_negative_raises_error PASSED                                                [ 72%]
tests/test_schemas.py::TestEquipo::test_create_valid_equipo PASSED                                                             [ 73%]
tests/test_schemas.py::TestEquipo::test_rendimiento_should_be_zero PASSED                                                      [ 73%]
tests/test_schemas.py::TestEquipo::test_expected_time_units PASSED                                                             [ 73%]
tests/test_schemas.py::TestSuministro::test_create_valid_suministro PASSED                                                     [ 73%]
tests/test_schemas.py::TestSuministro::test_cantidad_zero_warning PASSED                                                       [ 73%]
tests/test_schemas.py::TestSuministro::test_rendimiento_should_be_zero PASSED                                                  [ 73%]
tests/test_schemas.py::TestSuministro::test_expected_units PASSED                                                              [ 73%]
tests/test_schemas.py::TestTransporte::test_create_valid_transporte PASSED                                                     [ 73%]
tests/test_schemas.py::TestTransporte::test_expected_transport_units PASSED                                                    [ 74%]
tests/test_schemas.py::TestTransporte::test_rendimiento_should_be_zero PASSED                                                  [ 74%]
tests/test_schemas.py::TestOtro::test_create_valid_otro PASSED                                                                 [ 74%]
tests/test_schemas.py::TestOtro::test_flexible_units PASSED                                                                    [ 74%]
tests/test_schemas.py::TestCreateInsumo::test_create_mano_obra PASSED                                                          [ 74%]
tests/test_schemas.py::TestCreateInsumo::test_create_equipo PASSED                                                             [ 74%]
tests/test_schemas.py::TestCreateInsumo::test_create_suministro PASSED                                                         [ 74%]
tests/test_schemas.py::TestCreateInsumo::test_create_transporte PASSED                                                         [ 74%]
tests/test_schemas.py::TestCreateInsumo::test_create_otro PASSED                                                               [ 75%]
tests/test_schemas.py::TestCreateInsumo::test_create_with_enum PASSED                                                          [ 75%]
tests/test_schemas.py::TestCreateInsumo::test_create_case_insensitive PASSED                                                   [ 75%]
tests/test_schemas.py::TestCreateInsumo::test_create_invalid_tipo_raises_error PASSED                                          [ 75%]
tests/test_schemas.py::TestCreateInsumo::test_create_missing_kwargs_raises_error PASSED                                        [ 75%]
tests/test_schemas.py::TestCreateInsumo::test_create_forces_tipo_sync PASSED                                                   [ 75%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_complete_data PASSED                                              [ 75%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_adds_defaults PASSED                                              [ 75%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_converts_numeric_strings PASSED                                   [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_missing_required_raises_error PASSED                              [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_null_required_raises_error PASSED                                 [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_invalid_numeric_raises_error PASSED                               [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_normalizes_tipo PASSED                                            [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_calculates_valor_total PASSED                                     [ 76%]
tests/test_schemas.py::TestValidateInsumoData::test_validate_not_dict_raises_error PASSED                                      [ 76%]
tests/test_schemas.py::TestCreateInsumoFromRaw::test_create_from_raw_success PASSED                                            [ 76%]
tests/test_schemas.py::TestCreateInsumoFromRaw::test_create_from_raw_invalid_data PASSED                                       [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_get_tipo_insumo_class_valid PASSED                                           [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_get_tipo_insumo_class_with_enum PASSED                                       [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_get_tipo_insumo_class_invalid_raises_error PASSED                            [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_get_all_tipo_insumo_values PASSED                                            [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_is_valid_tipo_insumo_valid PASSED                                            [ 77%]
tests/test_schemas.py::TestUtilityFunctions::test_is_valid_tipo_insumo_invalid PASSED                                          [ 77%]
tests/test_schemas.py::TestConstants::test_unidad_normalizada_map_exists PASSED                                                [ 78%]
tests/test_schemas.py::TestConstants::test_insumo_class_map_complete PASSED                                                    [ 78%]
tests/test_schemas.py::TestConstants::test_tolerance_values PASSED                                                             [ 78%]
tests/test_schemas.py::TestConstants::test_length_limits PASSED                                                                [ 78%]
tests/test_schemas.py::TestConstants::test_numeric_limits PASSED                                                               [ 78%]
tests/test_schemas.py::TestConstants::test_unit_sets PASSED                                                                    [ 78%]
tests/test_schemas.py::TestIntegration::test_full_workflow_create_validate_serialize PASSED                                    [ 78%]
tests/test_schemas.py::TestIntegration::test_workflow_all_types PASSED                                                         [ 78%]
tests/test_schemas.py::TestEdgeCases::test_very_large_values PASSED                                                            [ 79%]
tests/test_schemas.py::TestEdgeCases::test_very_small_values PASSED                                                            [ 79%]
tests/test_schemas.py::TestEdgeCases::test_zero_values PASSED                                                                  [ 79%]
tests/test_schemas.py::TestEdgeCases::test_unicode_characters PASSED                                                           [ 79%]
tests/test_schemas.py::TestEdgeCases::test_very_long_description PASSED                                                        [ 79%]
tests/test_schemas.py::TestEdgeCases::test_decimal_precision PASSED                                                            [ 79%]
tests/test_utils.py::TestNormalizeText::test_normalize_simple_text PASSED                                                      [ 79%]
tests/test_utils.py::TestNormalizeText::test_normalize_accents PASSED                                                          [ 79%]
tests/test_utils.py::TestNormalizeText::test_normalize_special_chars_default PASSED                                            [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_preserve_special_chars PASSED                                           [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_multiple_spaces PASSED                                                  [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_empty_string PASSED                                                     [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_none_raises_type_error PASSED                                           [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_numeric_input PASSED                                                    [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_case_insensitive PASSED                                                 [ 80%]
tests/test_utils.py::TestNormalizeText::test_normalize_cache_hit PASSED                                                        [ 80%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_basic PASSED                                               [ 81%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_empty PASSED                                               [ 81%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_none_input PASSED                                          [ 81%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_with_nulls PASSED                                          [ 81%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_large_chunks PASSED                                        [ 81%]
tests/test_utils.py::TestNormalizeTextSeries::test_normalize_series_preserve_special PASSED                                    [ 81%]
tests/test_utils.py::TestParseNumber::test_parse_integer_string PASSED                                                         [ 81%]
tests/test_utils.py::TestParseNumber::test_parse_float_string PASSED                                                           [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_float_comma_separator PASSED                                                  [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_direct_numeric PASSED                                                         [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_none_returns_default PASSED                                                   [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_thousands_comma_separator PASSED                                              [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_thousands_dot_separator PASSED                                                [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_thousands_space_separator PASSED                                              [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_percentage PASSED                                                             [ 82%]
tests/test_utils.py::TestParseNumber::test_parse_percentage_disabled PASSED                                                    [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_scientific_notation PASSED                                                    [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_scientific_disabled PASSED                                                    [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_currency_symbols PASSED                                                       [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_negative_numbers PASSED                                                       [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_positive_sign PASSED                                                          [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_multiple_signs PASSED                                                         [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_empty_string PASSED                                                           [ 83%]
tests/test_utils.py::TestParseNumber::test_parse_non_numeric_text PASSED                                                       [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_very_small_number PASSED                                                      [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_very_large_number PASSED                                                      [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_zero_variations PASSED                                                        [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_strict_mode_raises_exception PASSED                                           [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_strict_mode_valid_input PASSED                                                [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_debug_mode PASSED                                                             [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_only_decimal_separator PASSED                                                 [ 84%]
tests/test_utils.py::TestParseNumber::test_parse_multiple_decimal_separators PASSED                                            [ 85%]
tests/test_utils.py::TestParseNumber::test_parse_whitespace_only PASSED                                                        [ 85%]
tests/test_utils.py::TestCleanApuCode::test_limpieza_basica PASSED                                                             [ 85%]
tests/test_utils.py::TestCleanApuCode::test_min_length PASSED                                                                  [ 85%]
tests/test_utils.py::TestCleanApuCode::test_is_item_code PASSED                                                                [ 85%]
tests/test_utils.py::TestCleanApuCode::test_validate_format_exceptions PASSED                                                  [ 85%]
tests/test_utils.py::TestCleanApuCode::test_no_validate_format PASSED                                                          [ 85%]
tests/test_utils.py::TestCleanApuCode::test_warnings PASSED                                                                    [ 85%]
tests/test_utils.py::TestCleanApuCode::test_correcciones_automaticas PASSED                                                    [ 86%]
tests/test_utils.py::TestCleanApuCode::test_tipos_de_entrada PASSED                                                            [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[1-1-False] PASSED                                  [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[1.2.3-1.2.3-False] PASSED                          [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[A.1-A.1-False] PASSED                              [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[ITEM-01-ITEM-01-False] PASSED                      [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[1.-1-False] PASSED                                 [ 86%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[.1-1-False] PASSED                                 [ 87%]
tests/test_utils.py::TestCleanApuCode::test_item_code_cleaning_and_warnings[A-B--A-B-False] PASSED                             [ 87%]
tests/test_utils.py::TestCleanApuCode::test_item_code_invalid_raises_error PASSED                                              [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_standard_unit PASSED                                                    [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_mapped_unit PASSED                                                      [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_case_insensitive PASSED                                                 [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_with_spaces PASSED                                                      [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_empty_returns_default PASSED                                            [ 87%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_none_returns_default PASSED                                             [ 88%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_unknown_unit PASSED                                                     [ 88%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_special_chars_removal PASSED                                            [ 88%]
tests/test_utils.py::TestNormalizeUnit::test_normalize_cache_hit PASSED                                                        [ 88%]
tests/test_utils.py::TestSafeReadDataframe::test_read_csv_basic PASSED                                                         [ 88%]
tests/test_utils.py::TestSafeReadDataframe::test_read_csv_with_encoding_auto PASSED                                            [ 88%]
tests/test_utils.py::TestSafeReadDataframe::test_read_csv_with_nrows PASSED                                                    [ 88%]
tests/test_utils.py::TestSafeReadDataframe::test_read_csv_with_usecols PASSED                                                  [ 88%]
tests/test_utils.py::TestSafeReadDataframe::test_read_nonexistent_file PASSED                                                  [ 89%]
tests/test_utils.py::TestSafeReadDataframe::test_read_unsupported_format PASSED                                                [ 89%]
tests/test_utils.py::TestSafeReadDataframe::test_read_path_object PASSED                                                       [ 89%]
tests/test_utils.py::TestSafeReadDataframe::test_read_string_path PASSED                                                       [ 89%]
tests/test_utils.py::TestSafeReadDataframe::test_read_csv_separator_detection PASSED                                           [ 89%]
tests/test_utils.py::TestValidateNumericValue::test_validate_valid_number PASSED                                               [ 89%]
tests/test_utils.py::TestValidateNumericValue::test_validate_zero_allowed PASSED                                               [ 89%]
tests/test_utils.py::TestValidateNumericValue::test_validate_zero_not_allowed PASSED                                           [ 89%]
tests/test_utils.py::TestValidateNumericValue::test_validate_negative_allowed PASSED                                           [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_negative_not_allowed PASSED                                       [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_min_value PASSED                                                  [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_max_value PASSED                                                  [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_range PASSED                                                      [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_nan PASSED                                                        [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_inf_not_allowed PASSED                                            [ 90%]
tests/test_utils.py::TestValidateNumericValue::test_validate_inf_allowed PASSED                                                [ 91%]
tests/test_utils.py::TestValidateNumericValue::test_validate_non_numeric_type PASSED                                           [ 91%]
tests/test_utils.py::TestValidateNumericValue::test_validate_numpy_types PASSED                                                [ 91%]
tests/test_utils.py::TestValidateNumericValue::test_validate_field_name_in_message PASSED                                      [ 91%]
tests/test_utils.py::TestValidateSeries::test_validate_series_mask_mode PASSED                                                 [ 91%]
tests/test_utils.py::TestValidateSeries::test_validate_series_dataframe_mode PASSED                                            [ 91%]
tests/test_utils.py::TestValidateSeries::test_validate_empty_series PASSED                                                     [ 91%]
tests/test_utils.py::TestValidateSeries::test_validate_series_with_kwargs PASSED                                               [ 91%]
tests/test_utils.py::TestCreateApuSignature::test_signature_basic PASSED                                                       [ 92%]
tests/test_utils.py::TestCreateApuSignature::test_signature_custom_fields PASSED                                               [ 92%]
tests/test_utils.py::TestCreateApuSignature::test_signature_missing_fields PASSED                                              [ 92%]
tests/test_utils.py::TestCreateApuSignature::test_signature_empty_data PASSED                                                  [ 92%]
tests/test_utils.py::TestCreateApuSignature::test_signature_numeric_values PASSED                                              [ 92%]
tests/test_utils.py::TestCreateApuSignature::test_signature_normalization PASSED                                               [ 92%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_iqr_basic PASSED                                                 [ 92%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_with_bounds PASSED                                               [ 92%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_zscore PASSED                                                    [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_modified_zscore PASSED                                           [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_empty_series PASSED                                              [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_all_nan PASSED                                                   [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_invalid_method PASSED                                            [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_constant_series PASSED                                           [ 93%]
tests/test_utils.py::TestDetectOutliers::test_detect_outliers_custom_threshold PASSED                                          [ 93%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_exact_match PASSED                                                  [ 93%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_partial_match PASSED                                                [ 94%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_case_insensitive PASSED                                             [ 94%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_case_sensitive PASSED                                               [ 94%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_multiple_possibilities PASSED                                       [ 94%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_empty_dataframe PASSED                                              [ 94%]
tests/test_utils.py::TestFindAndRenameColumns::test_rename_no_matches PASSED                                                   [ 94%]
tests/test_utils.py::TestBatchProcessDataframe::test_batch_process_small_df PASSED                                             [ 94%]
tests/test_utils.py::TestBatchProcessDataframe::test_batch_process_large_df PASSED                                             [ 94%]
tests/test_utils.py::TestBatchProcessDataframe::test_batch_process_with_kwargs PASSED                                          [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_basic_types PASSED                                                     [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_numpy_types PASSED                                                     [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_pandas_types PASSED                                                    [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_nan_inf PASSED                                                         [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_pandas_na PASSED                                                       [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_nested_structures PASSED                                               [ 95%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_max_depth_error PASSED                                                 [ 96%]
tests/test_utils.py::TestSanitizeForJson::test_sanitize_datetime PASSED                                                        [ 96%]
tests/test_utils.py::TestCalculateStatistics::test_statistics_basic PASSED                                                     [ 96%]
tests/test_utils.py::TestCalculateStatistics::test_statistics_with_nulls PASSED                                                [ 96%]
tests/test_utils.py::TestCalculateStatistics::test_statistics_empty_series PASSED                                              [ 96%]
tests/test_utils.py::TestCalculateStatistics::test_statistics_all_nan PASSED                                                   [ 96%]
tests/test_utils.py::TestCalculateStatistics::test_statistics_quartiles PASSED                                                 [ 96%]
tests/test_utils.py::TestCalculateStdDev::test_std_dev_basic PASSED                                                            [ 96%]
tests/test_utils.py::TestCalculateStdDev::test_std_dev_constant_values PASSED                                                  [ 97%]
tests/test_utils.py::TestCalculateStdDev::test_std_dev_single_value PASSED                                                     [ 97%]
tests/test_utils.py::TestCalculateStdDev::test_std_dev_empty_list PASSED                                                       [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_basic PASSED                                                 [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_empty_df PASSED                                              [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_missing_columns PASSED                                       [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_aggregation PASSED                                           [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_percentages PASSED                                           [ 97%]
tests/test_utils.py::TestCalculateUnitCosts::test_calculate_costs_zero_division PASSED                                         [ 98%]
tests/test_utils.py::TestIntegration::test_full_workflow_text_processing PASSED                                                [ 98%]
tests/test_utils.py::TestIntegration::test_full_workflow_numeric_processing PASSED                                             [ 98%]
tests/test_utils.py::TestIntegration::test_full_workflow_dataframe_processing PASSED                                           [ 98%]
tests/test_utils.py::TestIntegration::test_full_workflow_apu_processing PASSED                                                 [ 98%]
tests/test_utils.py::TestPerformance::test_normalize_text_cache_performance PASSED                                             [ 98%]
tests/test_utils.py::TestPerformance::test_parse_number_performance PASSED                                                     [ 98%]
tests/test_utils.py::TestPerformance::test_batch_processing_efficiency PASSED                                                  [ 98%]
tests/test_utils.py::TestConstants::test_standard_units_is_frozen_set PASSED                                                   [ 99%]
tests/test_utils.py::TestConstants::test_standard_units_contains_common_units PASSED                                           [ 99%]
tests/test_utils.py::TestConstants::test_unit_mapping_is_dict PASSED                                                           [ 99%]
tests/test_utils.py::TestConstants::test_unit_mapping_consistency PASSED                                                       [ 99%]
tests/test_utils.py::TestErrorHandling::test_normalize_text_invalid_type_handling PASSED                                       [ 99%]
tests/test_utils.py::TestErrorHandling::test_parse_number_extreme_values PASSED                                                [ 99%]
tests/test_utils.py::TestErrorHandling::test_validate_numeric_mixed_types PASSED                                               [ 99%]
tests/test_utils.py::TestErrorHandling::test_safe_read_corrupted_file PASSED                                                   [100%]

========================================================== warnings summary ==========================================================
<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type SwigPyPacked has no __module__ attribute

<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type SwigPyObject has no __module__ attribute

<frozen importlib._bootstrap>:241
  <frozen importlib._bootstrap>:241: DeprecationWarning: builtin type swigvarlink has no __module__ attribute

tests/test_models.py:1137
  /Users/gerardomayor/Documents/estru_techos/apu_filter/tests/test_models.py:1137: PytestUnknownMarkWarning: Unknown pytest.mark.slow - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.slow

tests/test_app.py::TestCreateApp::test_create_app_development
tests/test_app.py::TestCreateApp::test_create_app_testing
tests/test_app.py::TestCreateApp::test_create_app_production
tests/test_app.py::TestCreateApp::test_create_app_config_loading
tests/test_app.py::TestCreateApp::test_create_app_upload_folder_creation
tests/test_app.py::TestCreateApp::test_create_app_session_configuration
  /Users/gerardomayor/miniconda3/envs/apu_filter_env/lib/python3.10/site-packages/flask_session/redis/redis.py:51: RuntimeWarning: No valid Redis instance provided, attempting to create a new instance on localhost with default settings.
    warnings.warn(

tests/test_apu_processor.py::TestAPUProcessor::test_integration_with_calculate_unit_costs
tests/test_apu_processor.py::TestAPUProcessor::test_process_all
  /Users/gerardomayor/Documents/estru_techos/apu_filter/app/apu_processor.py:884: UserWarning: Suministro [1.1]: rendimiento=350.0 no es relevante. Se recomienda usar 0.0
    return InsumoClass(

tests/test_apu_processor.py::TestAPUProcessor::test_process_with_comma_decimal_separator
  /Users/gerardomayor/Documents/estru_techos/apu_filter/app/apu_processor.py:884: UserWarning: Suministro [3.1]: rendimiento=0.15 no es relevante. Se recomienda usar 0.0
    return InsumoClass(

tests/test_models.py::TestAdditionalCoverage::test_sanitize_complex_values
  /Users/gerardomayor/Documents/estru_techos/apu_filter/models/probability_models.py:232: ComplexWarning: Casting complex values to real discards the imaginary part
    return float(value)

tests/test_schemas.py::TestInsumoProcesado::test_create_valid_insumo
tests/test_schemas.py::TestInsumoProcesado::test_normalization_in_post_init
tests/test_schemas.py::TestInsumoProcesado::test_description_normalization
tests/test_schemas.py::TestInsumoProcesado::test_tipo_categoria_sync
tests/test_schemas.py::TestInsumoProcesado::test_to_dict
tests/test_schemas.py::TestInsumoProcesado::test_validate_method
tests/test_schemas.py::TestInsumoProcesado::test_repr
  /Users/gerardomayor/Documents/estru_techos/apu_filter/app/schemas.py:572: UserWarning: InsumoProcesado [APU-001]: unidades 'M3'/'KG' no son tpicas. Unidades esperadas: frozenset({'KIT', 'U', 'PAR', 'JUEGO', 'UND', 'UNIDAD'})
    self._validate_consistency()

tests/test_schemas.py::TestManoDeObra::test_create_valid_mano_obra
  /Users/gerardomayor/Documents/estru_techos/apu_filter/tests/test_schemas.py:747: UserWarning: ManoDeObra [APU-001]: rendimiento=0.6700 sugiere cantidad1.4925, pero cantidad=1.5000
    mano_obra = ManoDeObra(**sample_mano_obra_data)

tests/test_schemas.py::TestManoDeObra::test_jornal_validation
  /Users/gerardomayor/Documents/estru_techos/apu_filter/tests/test_schemas.py:796: UserWarning: ManoDeObra [APU-001]: rendimiento=0.6700 sugiere cantidad1.4925, pero cantidad=1.5000
    mano_obra = ManoDeObra(**data)

tests/test_schemas.py::TestCreateInsumo::test_create_mano_obra
  /Users/gerardomayor/Documents/estru_techos/apu_filter/app/schemas.py:995: UserWarning: ManoDeObra [APU-001]: rendimiento=0.6700 sugiere cantidad1.4925, pero cantidad=1.5000
    return insumo_class(**valid_kwargs)

tests/test_schemas.py::TestIntegration::test_workflow_all_types
  /Users/gerardomayor/Documents/estru_techos/apu_filter/app/schemas.py:572: UserWarning: Transporte [APU-001]: unidades 'M3'/'KG' no son tpicas. Unidades esperadas: frozenset({'VIAJE', 'MILLA', 'TON-KM', 'KM', 'VIAJES'})
    self._validate_consistency()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================================================= 778 passed, 25 warnings in 52.35s ==================================================