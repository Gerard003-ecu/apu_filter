============================================== short test summary info ===============================================
FAILED tests/test_app.py::TestAppEndpoints::test_concurrent_sessions - AssertionError: 500 != 200
FAILED tests/test_app.py::TestAppEndpoints::test_get_apu_detail_not_found - AssertionError: 500 != 200
FAILED tests/test_app.py::TestAppEndpoints::test_get_apu_detail_with_session - AssertionError: 500 != 200
FAILED tests/test_app.py::TestAppEndpoints::test_get_apu_detail_without_session - TypeError: the JSON object must be str, bytes or bytearray, not MagicMock
FAILED tests/test_app.py::TestAppEndpoints::test_get_estimate_invalid_content_type - TypeError: the JSON object must be str, bytes or bytearray, not MagicMock
FAILED tests/test_app.py::TestAppEndpoints::test_get_estimate_no_params - TypeError: the JSON object must be str, bytes or bytearray, not MagicMock
FAILED tests/test_app.py::TestAppEndpoints::test_get_estimate_with_session - AssertionError: 500 != 200
FAILED tests/test_app.py::TestAppEndpoints::test_get_estimate_without_session - TypeError: the JSON object must be str, bytes or bytearray, not MagicMock
FAILED tests/test_app.py::TestAppEndpoints::test_session_persistence_across_requests - AssertionError: 500 != 200
FAILED tests/test_app.py::TestAppEndpoints::test_upload_files_success - AssertionError: 500 != 200
FAILED tests/test_app.py::TestIntegration::test_complete_workflow - AssertionError: 500 != 200
FAILED tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__none_in_apus_detail - AssertionError: None != [] : Debe convertir None a lista vacía
FAILED tests/test_data_validator.py::TestDataValidator::test_validate_and_clean_data__none_in_presupuesto - AssertionError: None != [] : Debe convertir None a lista vacía
FAILED tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__fuzzy_matching_enabled - AssertionError: 'Tornillo de acero 1/2 pulgadas' != 'Tornillo de acero 1/2"'
- Tornillo de acero 1/2 pulgadas
?                      ^^^^^^^^^
+ Tornillo de acero 1/2"
?                      ^
FAILED tests/test_data_validator.py::TestDataValidator::test_validate_missing_descriptions__no_fuzzy_available - AssertionError: 'fuzzywuzzy no instalado' not found in "Descripción faltante. Fuzzy matching no disponible. Instale 'fuzzywuzzy' para mejoras."
FAILED tests/test_data_validator.py::TestDataValidator::test_validate_zero_quantity_with_cost__invalid_types - AssertionError: 'alertas' not found in {'DESCRIPCION_INSUMO': 'Pintura', 'CANTIDAD': 'cero', 'VALOR_TOTAL': '100', 'VR_UNITARIO': '0'}
FAILED tests/test_estimator.py::test_calculate_estimate_delegates_correctly - assert 'error' not in {'error': "\u274c Columnas faltantes en APUs: {'UNIDAD', 'EQUIPO', 'VALOR_SUMINISTRO_UN', 'tipo_apu'}", 'log': "\U0001f575\ufe0f ESTIMADOR DETECTIVE INICIADO\n======================================================================\n\U0001f4da Datos cargados: 3 APUs disponibles\n\u274c Columnas faltantes en APUs: {'UNIDAD', 'EQUIPO', 'VALOR_SUMINISTRO_UN', 'tipo_apu'}"}
FAILED tests/test_models.py::TestProbabilityModels::test_sanitize_value_handles_non_numeric - ValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()
FAILED tests/test_models.py::TestProbabilityModels::test_simulation_with_min_cost_threshold - AssertionError: unexpectedly None
FAILED tests/test_schemas.py::test_normalize_unit - AssertionError: assert '' == 'UNIDAD'
  
  - UNIDAD
FAILED tests/test_schemas.py::test_transporte_unidad_no_tipica - Failed: DID NOT WARN. No warnings of type (<class 'UserWarning'>,) were emitted.
 Emitted warnings: [].
FAILED tests/test_schemas.py::test_validate_insumo_data_exitoso - AssertionError: assert 'm2' == 'M2'
  
  - M2
  + m2
========================= 22 failed, 228 passed, 2 xfailed, 43 warnings in 146.83s (0:02:26) =========================