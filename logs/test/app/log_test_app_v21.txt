.2025-09-17 17:49:40,599 - INFO - Cache miss.
2025-09-17 17:49:40,600 - INFO - Procesando archivos: test_uploads/7861c160-dc6e-4bb1-aabc-6df92d258beb/presupuesto_1758149380_presupuesto.csv, test_uploads/7861c160-dc6e-4bb1-aabc-6df92d258beb/apus_1758149380_apus.csv, test_uploads/7861c160-dc6e-4bb1-aabc-6df92d258beb/insumos_1758149380_insumos.csv
2025-09-17 17:49:40,655 - INFO - Éxito al leerpresupuesto_1758149380_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:40,713 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/7861c160-dc6e-4bb1-aabc-6df92d258beb/presupuesto_1758149380_presupuesto.csv
2025-09-17 17:49:40,808 - INFO - Iniciando el análisis del archivo: test_uploads/7861c160-dc6e-4bb1-aabc-6df92d258beb/apus_1758149380_apus.csv
2025-09-17 17:49:40,811 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:40,812 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:40,813 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:40,815 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:40,816 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:40,968 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,005 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:41,059 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-17 17:49:41,088 - INFO - Cache miss.
2025-09-17 17:49:41,089 - INFO - Procesando archivos: test_uploads/7876c63d-a9ae-4dea-9230-54905273ebf9/presupuesto_1758149381_presupuesto.csv, test_uploads/7876c63d-a9ae-4dea-9230-54905273ebf9/apus_1758149381_apus.csv, test_uploads/7876c63d-a9ae-4dea-9230-54905273ebf9/insumos_1758149381_insumos.csv
2025-09-17 17:49:41,091 - INFO - Éxito al leerpresupuesto_1758149381_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:41,093 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/7876c63d-a9ae-4dea-9230-54905273ebf9/presupuesto_1758149381_presupuesto.csv
2025-09-17 17:49:41,120 - INFO - Iniciando el análisis del archivo: test_uploads/7876c63d-a9ae-4dea-9230-54905273ebf9/apus_1758149381_apus.csv
2025-09-17 17:49:41,123 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:41,124 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:41,125 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:41,126 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:41,127 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:41,181 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,206 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:41,240 - INFO - Cache info: hits=0, misses=2, size=2
2025-09-17 17:49:41,243 - INFO - Solicitud POST a /api/estimate con sesión: 7876c63d-a9ae-4dea-9230-54905273ebf9
2025-09-17 17:49:41,243 - INFO - Parámetros recibidos en /api/estimate: {'cuadrilla': '5', 'material': 'TST', 'tipo': 'CUBIERTA'}
2025-09-17 17:49:41,265 - INFO - Resultado de calculate_estimate: {'valor_suministro': 0.0, 'valor_instalacion': np.float64(80000.0), 'tiempo_instalacion': np.float64(0.0001), 'apu_encontrado': 'Suministro: N/A | Instalación: MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5', 'log': "Parámetros de entrada: {'cuadrilla': '5', 'material': 'TST', 'tipo': 'CUBIERTA'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 0 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 1 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 1APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 1 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nÉXITO: APU de Instalación seleccionado: 'MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5'\n\n--- CÁLCULO DE COSTOS Y TIEMPO ---\nCosto Instalación Base (MO+EQ): $80,000 | Tiempo: 0.0001 días/un\n\n--- RESULTADO FINAL ---\nValor Suministro: $0\nValor Instalación: $80,000"}
.2025-09-17 17:49:41,274 - INFO - Cache miss.
2025-09-17 17:49:41,274 - INFO - Procesando archivos: test_uploads/d9ffd0e6-e273-4f35-835b-a48436c9e5d4/presupuesto_1758149381_presupuesto.csv, test_uploads/d9ffd0e6-e273-4f35-835b-a48436c9e5d4/apus_1758149381_apus.csv, test_uploads/d9ffd0e6-e273-4f35-835b-a48436c9e5d4/insumos_1758149381_insumos.csv
2025-09-17 17:49:41,276 - INFO - Éxito al leerpresupuesto_1758149381_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:41,277 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/d9ffd0e6-e273-4f35-835b-a48436c9e5d4/presupuesto_1758149381_presupuesto.csv
2025-09-17 17:49:41,299 - INFO - Iniciando el análisis del archivo: test_uploads/d9ffd0e6-e273-4f35-835b-a48436c9e5d4/apus_1758149381_apus.csv
2025-09-17 17:49:41,304 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:41,308 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:41,309 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:41,310 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:41,310 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:41,389 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,407 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:41,439 - INFO - Cache info: hits=0, misses=3, size=3
.2025-09-17 17:49:41,482 - INFO - Cache miss.
2025-09-17 17:49:41,482 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-17 17:49:41,486 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:41,488 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:41,503 - INFO - Iniciando el análisis del archivo: test_apus.csv
2025-09-17 17:49:41,506 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:41,507 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:41,508 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:41,508 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:41,509 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:41,582 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,607 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:41,658 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-17 17:49:41,659 - INFO - Cache info: hits=1, misses=1, size=1
2025-09-17 17:49:41,659 - INFO - Caché limpiado forzosamente y procesando sin caché.
2025-09-17 17:49:41,659 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-17 17:49:41,662 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:41,669 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:41,688 - INFO - Iniciando el análisis del archivo: test_apus.csv
2025-09-17 17:49:41,692 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:41,692 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:41,693 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:41,697 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:41,698 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:41,750 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,768 - INFO - --- Procesamiento completado ---
.2025-09-17 17:49:41,797 - INFO - Cache miss.
2025-09-17 17:49:41,797 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-17 17:49:41,803 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:41,805 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:41,821 - INFO - Iniciando el análisis del archivo: test_apus.csv
2025-09-17 17:49:41,823 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:41,824 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:41,825 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:41,825 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:41,825 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:41,893 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:41,909 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:41,966 - INFO - Cache info: hits=0, misses=1, size=1
..2025-09-17 17:49:42,005 - INFO - Cache miss.
2025-09-17 17:49:42,005 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-17 17:49:42,008 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:42,009 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:42,027 - INFO - Iniciando el análisis del archivo: test_apus.csv
2025-09-17 17:49:42,030 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:42,034 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:42,036 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:42,037 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:42,037 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:42,073 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:42,089 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:42,111 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-17 17:49:42,126 - INFO - Cache miss.
2025-09-17 17:49:42,127 - INFO - Procesando archivos: test_presupuesto_comma.csv, test_apus_comma.csv, test_insumos_comma.csv
2025-09-17 17:49:42,145 - INFO - Éxito al leertest_presupuesto_comma.csv con encoding 'latin1'y delimitador ','
2025-09-17 17:49:42,148 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto_comma.csv
2025-09-17 17:49:42,160 - INFO - Iniciando el análisis del archivo: test_apus_comma.csv
2025-09-17 17:49:42,160 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:42,161 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:42,161 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:42,162 - INFO - Análisis completado. Se encontraron 5 registros.
2025-09-17 17:49:42,200 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:42,222 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:42,250 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-17 17:49:42,252 - INFO - Cache miss.
2025-09-17 17:49:42,252 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-17 17:49:42,254 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:42,256 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:42,272 - INFO - Iniciando el análisis del archivo: test_apus.csv
2025-09-17 17:49:42,275 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO
2025-09-17 17:49:42,275 - INFO - Nuevo APU encontrado: 1,2 - ACABADOS FINALES
2025-09-17 17:49:42,276 - INFO - Nuevo APU encontrado: 1,3 - MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5
2025-09-17 17:49:42,276 - INFO - Nuevo APU encontrado: 1,5 - INGENIERO RESIDENTE
2025-09-17 17:49:42,277 - INFO - Análisis completado. Se encontraron 6 registros.
2025-09-17 17:49:42,312 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:42,332 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:42,356 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-17 17:49:42,359 - INFO - Cache miss.
2025-09-17 17:49:42,359 - INFO - Procesando archivos: test_presupuesto.csv, test_malformed_apus.csv, test_insumos.csv
2025-09-17 17:49:42,362 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:42,364 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-17 17:49:42,379 - INFO - Iniciando el análisis del archivo: test_malformed_apus.csv
2025-09-17 17:49:42,381 - INFO - Nuevo APU encontrado: 1,1 - REMATE CON PINTURA
2025-09-17 17:49:42,382 - INFO - Análisis completado. Se encontraron 1 registros.
2025-09-17 17:49:42,441 - INFO - Diagnóstico: 5 de 5 ítems del presupuesto encontraron su costo.
2025-09-17 17:49:42,457 - INFO - --- Procesamiento completado ---
2025-09-17 17:49:42,481 - INFO - Cache info: hits=0, misses=1, size=1
....2025-09-17 17:49:42,528 - ERROR - No se pudo leer non_existent_file.csv con ninguna combinación.
2025-09-17 17:49:42,535 - INFO - Éxito al leertest_encoding.csv con encoding 'latin1'y delimitador ';'
2025-09-17 17:49:42,538 - INFO - Tipos de datos optimizados con PyArrow para test_encoding.csv
2025-09-17 17:49:43,437 - INFO - Éxito al leer Excel test.xlsx
2025-09-17 17:49:43,438 - INFO - Tipos de datos optimizados con PyArrow para test.xlsx
.
----------------------------------------------------------------------
Ran 15 tests in 2.954s

OK