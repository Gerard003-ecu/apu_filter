.2025-09-16 12:18:11,718 - INFO - Cache miss.
2025-09-16 12:18:11,719 - INFO - Procesando archivos: test_uploads/bc9fb205-d49a-487e-ac7d-c09de6127101/presupuesto_1758043091_presupuesto.csv, test_uploads/bc9fb205-d49a-487e-ac7d-c09de6127101/apus_1758043091_apus.csv, test_uploads/bc9fb205-d49a-487e-ac7d-c09de6127101/insumos_1758043091_insumos.csv
2025-09-16 12:18:11,755 - INFO - Éxito al leerpresupuesto_1758043091_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:11,797 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/bc9fb205-d49a-487e-ac7d-c09de6127101/presupuesto_1758043091_presupuesto.csv
2025-09-16 12:18:12,042 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:12,119 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:12,262 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-16 12:18:12,302 - INFO - Cache miss.
2025-09-16 12:18:12,302 - INFO - Procesando archivos: test_uploads/93093b99-fd9c-4f92-adfe-94e1d7739195/presupuesto_1758043092_presupuesto.csv, test_uploads/93093b99-fd9c-4f92-adfe-94e1d7739195/apus_1758043092_apus.csv, test_uploads/93093b99-fd9c-4f92-adfe-94e1d7739195/insumos_1758043092_insumos.csv
2025-09-16 12:18:12,320 - INFO - Éxito al leerpresupuesto_1758043092_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:12,328 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/93093b99-fd9c-4f92-adfe-94e1d7739195/presupuesto_1758043092_presupuesto.csv
2025-09-16 12:18:12,692 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:12,751 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:12,897 - INFO - Cache info: hits=0, misses=2, size=2
2025-09-16 12:18:12,902 - INFO - Solicitud POST a /api/estimate con sesión: 93093b99-fd9c-4f92-adfe-94e1d7739195
2025-09-16 12:18:12,903 - INFO - Parámetros recibidos en /api/estimate: {'cuadrilla': '5', 'material': 'TST', 'tipo': 'CUBIERTA'}
2025-09-16 12:18:12,971 - INFO - Resultado de calculate_estimate: {'valor_suministro': 0.0, 'valor_instalacion': np.float64(80000.0), 'tiempo_instalacion': np.float64(8.0), 'apu_encontrado': 'Suministro: N/A | Instalación: MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5', 'log': "Parámetros de entrada: {'cuadrilla': '5', 'material': 'TST', 'tipo': 'CUBIERTA'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 0 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 1 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 1APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 1 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nÉXITO: APU de Instalación seleccionado: 'MANO DE OBRA INSTALACION TEJA SENCILLA CUADRILLA DE 5'\n\n--- CÁLCULO DE COSTOS Y TIEMPO ---\nCosto Instalación Base (MO+EQ): $80,000 | Tiempo: 8.0000 días/un\n\n--- RESULTADO FINAL ---\nValor Suministro: $0\nValor Instalación: $80,000"}
.2025-09-16 12:18:13,016 - INFO - Cache miss.
2025-09-16 12:18:13,016 - INFO - Procesando archivos: test_uploads/c1f33350-8339-4857-aa45-467f2342e20e/presupuesto_1758043093_presupuesto.csv, test_uploads/c1f33350-8339-4857-aa45-467f2342e20e/apus_1758043093_apus.csv, test_uploads/c1f33350-8339-4857-aa45-467f2342e20e/insumos_1758043093_insumos.csv
2025-09-16 12:18:13,035 - INFO - Éxito al leerpresupuesto_1758043093_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:13,049 - INFO - Tipos de datos optimizados con PyArrow para test_uploads/c1f33350-8339-4857-aa45-467f2342e20e/presupuesto_1758043093_presupuesto.csv
2025-09-16 12:18:13,291 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:13,321 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:13,383 - INFO - Cache info: hits=0, misses=3, size=3
.2025-09-16 12:18:13,446 - INFO - Cache miss.
2025-09-16 12:18:13,446 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-16 12:18:13,451 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:13,455 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:13,566 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:13,593 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:13,636 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-16 12:18:13,637 - INFO - Cache info: hits=1, misses=1, size=1
2025-09-16 12:18:13,637 - INFO - Caché limpiado forzosamente y procesando sin caché.
2025-09-16 12:18:13,637 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-16 12:18:13,642 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:13,646 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:13,750 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:13,780 - INFO - --- Procesamiento completado ---
.2025-09-16 12:18:13,838 - INFO - Cache miss.
2025-09-16 12:18:13,838 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-16 12:18:13,842 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:13,846 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:13,952 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:13,978 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:14,023 - INFO - Cache info: hits=0, misses=1, size=1
..2025-09-16 12:18:14,049 - INFO - Cache miss.
2025-09-16 12:18:14,050 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-16 12:18:14,054 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:14,058 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:14,162 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:14,188 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:14,229 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-16 12:18:14,255 - INFO - Cache miss.
2025-09-16 12:18:14,255 - INFO - Procesando archivos: test_presupuesto_comma.csv, test_apus_comma.csv, test_insumos_comma.csv
2025-09-16 12:18:14,279 - INFO - Éxito al leertest_presupuesto_comma.csv con encoding 'latin1'y delimitador ','
2025-09-16 12:18:14,284 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto_comma.csv
2025-09-16 12:18:14,466 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:14,537 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:14,626 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-16 12:18:14,630 - INFO - Cache miss.
2025-09-16 12:18:14,631 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-16 12:18:14,637 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:14,643 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:14,788 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:14,825 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:14,883 - INFO - Cache info: hits=0, misses=1, size=1
.2025-09-16 12:18:14,885 - INFO - Cache miss.
2025-09-16 12:18:14,885 - INFO - Procesando archivos: test_presupuesto.csv, test_malformed_apus.csv, test_insumos.csv
2025-09-16 12:18:14,891 - INFO - Éxito al leertest_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:14,895 - INFO - Tipos de datos optimizados con PyArrow para test_presupuesto.csv
2025-09-16 12:18:14,999 - INFO - Diagnóstico: 4 de 4 ítems del presupuesto encontraron su costo.
2025-09-16 12:18:15,017 - INFO - --- Procesamiento completado ---
2025-09-16 12:18:15,054 - INFO - Cache info: hits=0, misses=1, size=1
....2025-09-16 12:18:15,087 - ERROR - No se pudo leer non_existent_file.csv con ninguna combinación.
2025-09-16 12:18:15,093 - INFO - Éxito al leertest_encoding.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:18:15,095 - INFO - Tipos de datos optimizados con PyArrow para test_encoding.csv
2025-09-16 12:18:15,648 - INFO - Éxito al leer Excel test.xlsx
2025-09-16 12:18:15,650 - INFO - Tipos de datos optimizados con PyArrow para test.xlsx
.
----------------------------------------------------------------------
Ran 15 tests in 4.023s

OK