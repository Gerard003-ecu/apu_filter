..2025-09-12 22:48:12,057 - WARNING - Error leyendo non_existent_file.csv con encoding latin1: [Errno 2] No such file or directory: 'non_existent_file.csv'
2025-09-12 22:48:12,058 - WARNING - Error leyendo non_existent_file.csv con encoding utf-8: [Errno 2] No such file or directory: 'non_existent_file.csv'
2025-09-12 22:48:12,058 - WARNING - Error leyendo non_existent_file.csv con encoding iso-8859-1: [Errno 2] No such file or directory: 'non_existent_file.csv'
2025-09-12 22:48:12,062 - WARNING - Error leyendo non_existent_file.csv con encoding windows-1252: [Errno 2] No such file or directory: 'non_existent_file.csv'
2025-09-12 22:48:12,075 - ERROR - No se pudo leer non_existent_file.csv con ningún encoding conocido
.2025-09-12 22:48:12,111 - INFO - Cache miss.
2025-09-12 22:48:12,111 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-12 22:48:12,270 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,288 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,290 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-12 22:48:12,291 - INFO - Cache info: hits=1, misses=1, size=1
2025-09-12 22:48:12,291 - INFO - Caché limpiado forzosamente y procesando sin caché.
2025-09-12 22:48:12,292 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-12 22:48:12,365 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,375 - INFO - --- Procesamiento completado ---
.2025-09-12 22:48:12,382 - INFO - Cache miss.
2025-09-12 22:48:12,382 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-12 22:48:12,430 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,441 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,448 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-12 22:48:12,448 - WARNING - Parámetros requeridos faltantes o vacíos: ['material', 'cuadrilla']
2025-09-12 22:48:12,448 - WARNING - Parámetros requeridos faltantes o vacíos: ['cuadrilla']
F2025-09-12 22:48:12,465 - INFO - Cache miss.
2025-09-12 22:48:12,465 - INFO - Procesando archivos: test_presupuesto.csv, test_apus.csv, test_insumos.csv
2025-09-12 22:48:12,510 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,535 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,542 - INFO - Cache info: hits=0, misses=1, size=1
..2025-09-12 22:48:12,655 - INFO - Cache miss.
2025-09-12 22:48:12,655 - INFO - Procesando archivos: test_uploads/aab92326-9e4e-44b5-9160-34d6acb00ee9/presupuesto_1757735292_presupuesto.csv, test_uploads/aab92326-9e4e-44b5-9160-34d6acb00ee9/apus_1757735292_apus.csv, test_uploads/aab92326-9e4e-44b5-9160-34d6acb00ee9/insumos_1757735292_insumos.csv
2025-09-12 22:48:12,707 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,719 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,722 - INFO - Cache info: hits=0, misses=2, size=2
....2025-09-12 22:48:12,749 - INFO - Cache miss.
2025-09-12 22:48:12,750 - INFO - Procesando archivos: test_uploads/415f046a-e51f-480e-b315-57d660c6ff03/presupuesto_1757735292_presupuesto.csv, test_uploads/415f046a-e51f-480e-b315-57d660c6ff03/apus_1757735292_apus.csv, test_uploads/415f046a-e51f-480e-b315-57d660c6ff03/insumos_1757735292_insumos.csv
2025-09-12 22:48:12,801 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,812 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,815 - INFO - Cache info: hits=0, misses=3, size=3
.2025-09-12 22:48:12,825 - INFO - Cache miss.
2025-09-12 22:48:12,825 - INFO - Procesando archivos: test_uploads/bdde5cc4-cc98-4cb0-b26b-e18e25b16d8c/presupuesto_1757735292_presupuesto.csv, test_uploads/bdde5cc4-cc98-4cb0-b26b-e18e25b16d8c/apus_1757735292_apus.csv, test_uploads/bdde5cc4-cc98-4cb0-b26b-e18e25b16d8c/insumos_1757735292_insumos.csv
2025-09-12 22:48:12,888 - INFO - Diagnóstico: 2 de 2 ítems del presupuesto encontraron su costo.
2025-09-12 22:48:12,900 - INFO - --- Procesamiento completado ---
2025-09-12 22:48:12,903 - INFO - Cache info: hits=0, misses=4, size=4
2025-09-12 22:48:12,909 - WARNING - Parámetros requeridos faltantes o vacíos: ['cuadrilla']
F...
======================================================================
FAIL: test_calculate_estimate (__main__.TestCSVProcessor.test_calculate_estimate)
Prueba la función de estimación.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/gerardomayor/.pyenv/versions/3.12.3/lib/python3.12/unittest/mock.py", line 1390, in patched
    return func(*newargs, **newkeywargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/gerardomayor/Documents/estru_techos/apu_filter/test_app.py", line 224, in test_calculate_estimate
    self.assertNotIn("error", result)
AssertionError: 'error' unexpectedly found in {'error': "Parámetros requeridos faltantes o vacíos: ['cuadrilla']", 'log': ["Parámetros requeridos faltantes o vacíos: ['cuadrilla']"]}

======================================================================
FAIL: test_07_get_estimate_with_session (__main__.TestAppEndpoints.test_07_get_estimate_with_session)
Prueba el endpoint de estimación con una sesión válida.
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/gerardomayor/Documents/estru_techos/apu_filter/test_app.py", line 399, in test_07_get_estimate_with_session
    self.assertEqual(response.status_code, 200)
AssertionError: 404 != 200

----------------------------------------------------------------------
Ran 16 tests in 0.918s

FAILED (failures=2)