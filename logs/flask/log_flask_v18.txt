 * Serving Flask app 'app/app.py'
 * Debug mode: off
2025-09-16 16:16:16,851 - INFO - WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5002
2025-09-16 16:16:16,851 - INFO - Press CTRL+C to quit
2025-09-16 16:16:18,313 - INFO - 127.0.0.1 - - [16/Sep/2025 16:16:18] "GET / HTTP/1.1" 200 -
2025-09-16 16:16:30,491 - INFO - Cache miss.
2025-09-16 16:16:30,491 - INFO - Procesando archivos: /home/gerardo/Documentos/GitHub/apu_filter/uploads/ff1917f0-16ac-4652-baa3-32d5175d430f/presupuesto_1758057390_presupuesto.csv, /home/gerardo/Documentos/GitHub/apu_filter/uploads/ff1917f0-16ac-4652-baa3-32d5175d430f/apus_1758057390_apus.csv, /home/gerardo/Documentos/GitHub/apu_filter/uploads/ff1917f0-16ac-4652-baa3-32d5175d430f/insumos_1758057390_insumos.csv
2025-09-16 16:16:30,503 - INFO - Éxito al leerpresupuesto_1758057390_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 16:16:30,594 - INFO - Tipos de datos optimizados con PyArrow para /home/gerardo/Documentos/GitHub/apu_filter/uploads/ff1917f0-16ac-4652-baa3-32d5175d430f/presupuesto_1758057390_presupuesto.csv
2025-09-16 16:16:31,299 - INFO - Diagnóstico: 77 de 77 ítems del presupuesto encontraron su costo.
2025-09-16 16:16:31,605 - INFO - --- Procesamiento completado ---
2025-09-16 16:16:31,928 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-16 16:16:31,945 - INFO - 127.0.0.1 - - [16/Sep/2025 16:16:31] "POST /upload HTTP/1.1" 200 -
2025-09-16 16:16:32,071 - INFO - Solicitud POST a /api/estimate con sesión: ff1917f0-16ac-4652-baa3-32d5175d430f
2025-09-16 16:16:32,074 - INFO - Parámetros recibidos en /api/estimate: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}
2025-09-16 16:16:32,083 - INFO - Solicitud POST a /api/estimate con sesión: ff1917f0-16ac-4652-baa3-32d5175d430f
2025-09-16 16:16:32,083 - INFO - Parámetros recibidos en /api/estimate: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}
2025-09-16 16:16:32,178 - INFO - Resultado de calculate_estimate: {'error': 'No se encontró un APU de instalación que coincida con todos los criterios.', 'log': "Parámetros de entrada: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 9 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 0 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 0APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 0 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nERROR: No se encontró un APU de instalación que coincida con todos los criterios."}
2025-09-16 16:16:32,179 - INFO - Resultado de calculate_estimate: {'error': 'No se encontró un APU de instalación que coincida con todos los criterios.', 'log': "Parámetros de entrada: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 9 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 0 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 0APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 0 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nERROR: No se encontró un APU de instalación que coincida con todos los criterios."}
2025-09-16 16:16:32,179 - WARNING - Error retornado por calculate_estimate: No se encontró un APU de instalación que coincida con todos los criterios.
2025-09-16 16:16:32,180 - INFO - 127.0.0.1 - - [16/Sep/2025 16:16:32] "POST /api/estimate HTTP/1.1" 404 -
2025-09-16 16:16:32,179 - WARNING - Error retornado por calculate_estimate: No se encontró un APU de instalación que coincida con todos los criterios.
2025-09-16 16:16:32,182 - INFO - 127.0.0.1 - - [16/Sep/2025 16:16:32] "POST /api/estimate HTTP/1.1" 404 -
2025-09-16 16:16:40,323 - INFO - 127.0.0.1 - - [16/Sep/2025 16:16:40] "GET /api/apu/11,1 HTTP/1.1" 200 -