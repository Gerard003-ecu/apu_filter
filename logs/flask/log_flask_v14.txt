 * Serving Flask app 'app/app.py'
 * Debug mode: off
2025-09-16 12:19:05,884 - INFO - WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5002
2025-09-16 12:19:05,884 - INFO - Press CTRL+C to quit
2025-09-16 12:19:10,014 - INFO - 127.0.0.1 - - [16/Sep/2025 12:19:10] "GET / HTTP/1.1" 200 -
2025-09-16 12:19:10,998 - INFO - 127.0.0.1 - - [16/Sep/2025 12:19:10] "GET /favicon.ico HTTP/1.1" 404 -
2025-09-16 12:22:00,157 - INFO - Cache miss.
2025-09-16 12:22:00,158 - INFO - Procesando archivos: /home/gerardo/Documentos/GitHub/apu_filter/uploads/08499735-ee9d-40b4-8f75-33513cff38f4/presupuesto_1758043320_presupuesto.csv, /home/gerardo/Documentos/GitHub/apu_filter/uploads/08499735-ee9d-40b4-8f75-33513cff38f4/apus_1758043320_apus.csv, /home/gerardo/Documentos/GitHub/apu_filter/uploads/08499735-ee9d-40b4-8f75-33513cff38f4/insumos_1758043320_insumos.csv
2025-09-16 12:22:00,218 - INFO - Éxito al leerpresupuesto_1758043320_presupuesto.csv con encoding 'latin1'y delimitador ';'
2025-09-16 12:22:00,321 - INFO - Tipos de datos optimizados con PyArrow para /home/gerardo/Documentos/GitHub/apu_filter/uploads/08499735-ee9d-40b4-8f75-33513cff38f4/presupuesto_1758043320_presupuesto.csv
2025-09-16 12:22:01,765 - INFO - Diagnóstico: 77 de 77 ítems del presupuesto encontraron su costo.
2025-09-16 12:22:01,826 - INFO - --- Procesamiento completado ---
2025-09-16 12:22:01,925 - INFO - Cache info: hits=0, misses=1, size=1
2025-09-16 12:22:01,930 - INFO - 127.0.0.1 - - [16/Sep/2025 12:22:01] "POST /upload HTTP/1.1" 200 -
2025-09-16 12:22:02,287 - INFO - Solicitud POST a /api/estimate con sesión: 08499735-ee9d-40b4-8f75-33513cff38f4
2025-09-16 12:22:02,293 - INFO - Parámetros recibidos en /api/estimate: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}
2025-09-16 12:22:02,315 - INFO - Solicitud POST a /api/estimate con sesión: 08499735-ee9d-40b4-8f75-33513cff38f4
2025-09-16 12:22:02,316 - INFO - Parámetros recibidos en /api/estimate: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}
2025-09-16 12:22:02,483 - INFO - Resultado de calculate_estimate: {'error': 'No se encontró un APU de instalación que coincida con todos los criterios.', 'log': "Parámetros de entrada: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 0 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 0 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 0APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 0 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nERROR: No se encontró un APU de instalación que coincida con todos los criterios."}
2025-09-16 12:22:02,495 - WARNING - Error retornado por calculate_estimate: No se encontró un APU de instalación que coincida con todos los criterios.
2025-09-16 12:22:02,497 - INFO - 127.0.0.1 - - [16/Sep/2025 12:22:02] "POST /api/estimate HTTP/1.1" 404 -
2025-09-16 12:22:02,502 - INFO - Resultado de calculate_estimate: {'error': 'No se encontró un APU de instalación que coincida con todos los criterios.', 'log': "Parámetros de entrada: {'tipo': 'CUBIERTA', 'material': 'TST', 'cuadrilla': '5', 'm2': 1, 'zona': 'ZONA 0', 'izaje': 'MANUAL', 'seguridad': 'NORMAL'}\nParámetros mapeados: material='TEJA SENCILLA', tipo='INSTALACION'\n\n--- BÚSQUEDA DE SUMINISTRO ---\nBuscando la mejor coincidencia para'TEJA SENCILLA' en 0 opciones.\nNo se encontró una buena coincidencia para el suministro.\nEncontrados 0 candidatos para suministro.\nADVERTENCIA: No se encontró un APU de suministro directo. Iniciando fallback a insumos.\nERROR (Fallback): Material no encontrado en lista de insumos.\n\n--- BÚSQUEDA DE INSTALACIÓN ---\nPaso A: 0 APUs encontrados con 'MANO DE OBRA' e 'INSTALACION'.\nPaso B: 0APUs restantes tras filtrar por 'TEJA SENCILLA'.\nPaso C: 0 APUs restantes tras filtrar por 'CUADRILLA DE 5'.\nERROR: No se encontró un APU de instalación que coincida con todos los criterios."}
2025-09-16 12:22:02,508 - WARNING - Error retornado por calculate_estimate: No se encontró un APU de instalación que coincida con todos los criterios.
2025-09-16 12:22:02,509 - INFO - 127.0.0.1 - - [16/Sep/2025 12:22:02] "POST /api/estimate HTTP/1.1" 404 -
2025-09-16 12:22:09,653 - INFO - 127.0.0.1 - - [16/Sep/2025 12:22:09] "GET /api/apu/11,1 HTTP/1.1" 404 -