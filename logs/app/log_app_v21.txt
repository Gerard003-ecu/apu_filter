15:35:35 - INFO - Iniciando aplicaci√≥n en modo: development
15:35:35 - INFO - Iniciando aplicaci√≥n en modo: development
15:35:35 - INFO - Configuraci√≥n cargada exitosamente desde config.json
15:35:35 - INFO - Configuraci√≥n cargada exitosamente desde config.json
15:35:35 - INFO - APUPresenter inicializado correctamente
15:35:35 - INFO - APUPresenter inicializado correctamente
15:35:35 - INFO - Iniciando carga de artefactos de b√∫squeda sem√°ntica...
15:35:35 - INFO - Iniciando carga de artefactos de b√∫squeda sem√°ntica...
15:35:35 - WARNING - No se encontraron todos los archivos de embeddings. La b√∫squeda sem√°ntica estar√° desactivada. Ejecute 'scripts/generate_embeddings.py' para generarlos.
15:35:35 - WARNING - No se encontraron todos los archivos de embeddings. La b√∫squeda sem√°ntica estar√° desactivada. Ejecute 'scripts/generate_embeddings.py' para generarlos.
 * Serving Flask app 'app.app:create_app('development')'
 * Debug mode: off
15:35:35 - INFO - WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5002
15:35:35 - INFO - Press CTRL+C to quit
15:35:48 - INFO - 127.0.0.1 - - [16/Nov/2025 15:35:48] "GET / HTTP/1.1" 200 -
15:36:12 - INFO - Procesando archivos para sesi√≥n E_Fej5eA...
15:36:12 - INFO - Procesando archivos para sesi√≥n E_Fej5eA...
15:36:12 - INFO - ================================================================================
15:36:12 - INFO - üöÄ Iniciando procesamiento de archivos con patr√≥n pipeline...
15:36:12 - INFO - ================================================================================
15:36:12 - INFO - üîÑ Ejecutando pipeline de procesamiento...
15:36:12 - INFO - üì• Cargando presupuesto con perfil: {'header': 0, 'sep': ';', 'encoding': 'UTF-8-SIG'}
15:36:12 - INFO - Cargando datos desde /home/gerardo/Documentos/GitHub/apu_filter/uploads/E_Fej5eAB-f6pZx18WcHTN8oCeEHcv67IHKNzLQNKfA/presupuesto_clean.csv (formato: .csv)
15:36:12 - INFO - Cargando CSV desde /home/gerardo/Documentos/GitHub/apu_filter/uploads/E_Fej5eAB-f6pZx18WcHTN8oCeEHcv67IHKNzLQNKfA/presupuesto_clean.csv con delimitador ';' y codificaci√≥n 'UTF-8-SIG'
15:36:12 - INFO - üìä DataFrame inicial: 436 filas, 6 columnas
15:36:12 - INFO - üßπ [INICIAL] Limpieza de filas fantasma: 436 ‚Üí 435 filas (-1 eliminadas)
15:36:12 - ERROR - ‚ùå No se encontr√≥ encabezado v√°lido en las primeras 10 filas
15:36:12 - ERROR - üìã Primeras filas del archivo:
15:36:12 - ERROR -    Fila 0: ['1', 'REMATE CURVO EN LAMINA 3.05x1.22MTS CAL.22 COSTO INCLUYE IVA', nan, nan, nan, ' 871.995']
15:36:12 - ERROR -    Fila 1: ['1,1', 'REMATE CON PINTURA DE FABRICA CAL 22 DE 120 CMTS CURVO', 'ML', '2,85', ' 79.712 ', ' 227.179']
15:36:12 - ERROR -    Fila 2: ['1,2', 'REMATE CON PINTURA DE FABRICA CAL 22 DE 100 CMTS CURVO', 'ML', '2,85', ' 68.229 ', ' 194.453']
15:36:12 - ERROR -    Fila 3: ['1,3', 'REMATE CON PINTURA DE FABRICA CAL 22 DE 80 CMTS CURVO', 'ML', '2,85', ' 57.840 ', ' 164.844']
15:36:12 - ERROR -    Fila 4: ['1,4', 'REMATE CON PINTURA DE FABRICA CAL 22 DE 60 CMTS CURVO', 'ML', '2,85', ' 39.961 ', ' 113.889']
15:36:13 - ERROR - ‚ùå DataFrame vac√≠o despu√©s de establecer encabezado
15:36:13 - WARNING - ‚ö†Ô∏è  Se encontraron 54 insumos con descripciones normalizadas duplicadas. Se conservar√° el de mayor precio.
15:36:13 - INFO - ‚úÖ Insumos cargados: 115 insumos √∫nicos
15:36:13 - INFO - Iniciando parseo l√≠nea por l√≠nea de: apus_clean.csv
15:36:13 - INFO - Archivo le√≠do exitosamente con codificaci√≥n: MacRoman
15:36:13 - INFO - Parseo completo. Extra√≠dos 981 registros crudos.
15:36:13 - INFO - Parser Lark inicializado con arquitectura de especialistas
15:36:13 - INFO - Iniciando procesamiento de 981 APUs con especialistas
15:36:13 - INFO - Procesados 100/981 APUs
15:36:13 - INFO - Procesados 200/981 APUs
15:36:13 - INFO - Procesados 300/981 APUs
15:36:13 - INFO - Procesados 400/981 APUs
15:36:13 - INFO - Procesados 500/981 APUs
15:36:13 - INFO - Procesados 600/981 APUs
15:36:13 - INFO - Procesados 700/981 APUs
15:36:13 - INFO - Procesados 800/981 APUs
15:36:13 - INFO - Procesados 900/981 APUs
15:36:13 - INFO - Procesamiento completado: 0 insumos extra√≠dos
15:36:13 - WARNING - No se encontraron insumos v√°lidos
15:36:13 - ERROR - ‚ùå DataFrame 'presupuesto' est√° vac√≠o o es None
15:36:13 - ERROR - ‚ùå Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 1563, in _do_processing
    final_context = pipeline.run(initial_context)
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 112, in run
    context = step.execute(context)
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 308, in execute
    raise ValueError(error)
ValueError: DataFrame 'presupuesto' est√° vac√≠o o es None
15:36:13 - INFO - ================================================================================
15:36:13 - ERROR - Error de procesamiento: Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
15:36:13 - ERROR - Error de procesamiento: Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
15:36:13 - INFO - 127.0.0.1 - - [16/Nov/2025 15:36:13] "POST /upload HTTP/1.1" 500 -