INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:🚀 PARCHE DIA: 16.2 'UND' → 'DIA'
INFO:app.report_parser:============================================================
INFO:app.report_parser:📊 MÉTRICAS FINALES - INFERENCIA AGRESIVA
INFO:app.report_parser:============================================================
INFO:app.report_parser:
🎯 UNIDADES CRÍTICAS PARA EL ESTIMADOR:
INFO:app.report_parser: ML.................. 0.. ❌ FALTANTE
INFO:app.report_parser: M3.................. 0.. ❌ FALTANTE
INFO:app.report_parser: DIA................. 173 ✅ SUFICIENTE
INFO:app.report_parser: JOR................. 0.. ❌ FALTANTE
INFO:app.report_parser: M2.................. 0.. ❌ FALTANTE
INFO:app.report_parser:
💡 RECOMENDACIONES:
INFO:app.report_parser: • Se necesitan más APUs con UNIDAD=M2 para suministros
INFO:app.report_parser: • Se necesitan más APUs con UNIDAD=M3 para materiales volumétricos
INFO:app.report_parser:============================================================
INFO:app.report_parser:✅ DataFrame generado con 811 registros
INFO:app.procesador_csv:📊 Datos cargados:
INFO:app.procesador_csv:   - Presupuesto: 104 APUs
INFO:app.procesador_csv:   - Insumos maestros: 115 insumos
INFO:app.procesador_csv:   - APUs detallados: 811 registros de insumos en APUs
INFO:app.procesador_csv:🔗 Iniciando merge de APUs con catálogo de insumos...
INFO:app.procesador_csv:💰 Calculando costos de insumos...
DEBUG:app.procesador_csv:Estadísticas de CANTIDAD_APU:
count    8.110000e+02
mean     1.568531e+04
std      1.051404e+05
min      0.000000e+00
25%      2.000000e-02
50%      2.272730e-01
75%      1.110000e+00
max      1.334820e+06
Name: CANTIDAD_APU, dtype: float64
WARNING:app.procesador_csv:⚠️ Cantidad extremadamente alta detectada: 1334819.81982
DEBUG:app.procesador_csv:Estadísticas de VR_UNITARIO_INSUMO:
count     527.000000
mean       76.850192
std       239.822106
min         0.000000
25%         2.644879
50%         6.846000
75%        41.860135
max      2475.000000
Name: VR_UNITARIO_INSUMO, dtype: float64
INFO:app.procesador_csv:📊 Agregando costos por APU y categoría...
INFO:app.procesador_csv:✅ df_apu_costos creado: 77 APUs únicos
INFO:app.procesador_csv:📈 Valor unitario máximo de APU: $321,853,424.74
WARNING:app.procesador_csv:⚠️ Valor unitario extremadamente alto detectado
WARNING:app.procesador_csv:APUs más costosos:
CATEGORIA CODIGO_APU  VALOR_CONSTRUCCION_UN  MATERIALES  MANO DE OBRA  EQUIPO
28              16.2           3.218534e+08           0  3.218534e+08       0
7               10.1           3.060756e+04           0  3.060756e+04       0
23              13.2           2.569081e+04           0  2.569081e+04       0
13              10.7           2.469573e+04           0  2.469573e+04       0
22              13.1           2.351975e+04           0  2.351975e+04       0
INFO:app.procesador_csv:🔗 Realizando merge final: presupuesto + costos...
INFO:app.procesador_csv:   - df_presupuesto: 104 filas, 104 APUs únicos
INFO:app.procesador_csv:   - df_apu_costos: 77 filas, 77 APUs únicos
INFO:app.procesador_csv:✅ Merge exitoso: 104 filas (sin duplicación)
INFO:app.procesador_csv:💵 Calculando valores totales del presupuesto...
DEBUG:app.procesador_csv:Estadísticas de CANTIDAD_PRESUPUESTO:
count    104.000000
mean      19.334615
std       70.210452
min        0.000000
25%        0.000000
50%        2.850000
75%        2.850000
max      374.000000
Name: CANTIDAD_PRESUPUESTO, dtype: float64
INFO:app.procesador_csv:💰 COSTO TOTAL CONSOLIDADO: $120,386,519,936.83
INFO:app.procesador_csv:🤖 Iniciando Agente de Validación de Datos...
INFO:app.data_validator:El Agente de Validación de Datos ha iniciado.
WARNING:app.data_validator:Alerta de costo excesivo para el item None: Costo unitario (321,853,424.74) excede el umbral de 50,000,000.00.
INFO:app.data_validator:El Agente de Validación de Datos ha completado su ejecución.
INFO:app.procesador_csv:✅ Validación completada.
INFO:app.procesador_csv:================================================================================
INFO:app.procesador_csv:🎉 Procesamiento completado exitosamente
INFO:app.procesador_csv:   - APUs en presupuesto: 104
INFO:app.procesador_csv:   - Costo total: $120,386,519,936.83
INFO:app.procesador_csv:================================================================================
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:11:09] "POST /upload HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:11:09] "POST /api/estimate HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:11:09] "POST /api/estimate HTTP/1.1" 200 -
DEBUG:app.app:Iniciando get_apu_detail para el código: 1.1
DEBUG:app.app:Datos sanitizados. Encontrados 3 insumos para el APU 1.1
DEBUG:app.app:Agrupando todos los insumos por categoría y descripción...
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:11:24] "GET /api/apu/1.1 HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:12:02] "POST /api/estimate HTTP/1.1" 200 -
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:12:11] "POST /api/estimate HTTP/1.1" 200 -
DEBUG:app.app:Iniciando get_apu_detail para el código: 1.1
DEBUG:app.app:Datos sanitizados. Encontrados 3 insumos para el APU 1.1
DEBUG:app.app:Agrupando todos los insumos por categoría y descripción...
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:13:01] "GET /api/apu/1.1 HTTP/1.1" 200 -
DEBUG:app.app:Iniciando get_apu_detail para el código: 16.2
DEBUG:app.app:Datos sanitizados. Encontrados 399 insumos para el APU 16.2
DEBUG:app.app:Agrupando todos los insumos por categoría y descripción...
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:13:16] "GET /api/apu/16.2 HTTP/1.1" 200 -
DEBUG:app.app:Iniciando get_apu_detail para el código: 1
INFO:werkzeug:127.0.0.1 - - [28/Oct/2025 18:13:37] "GET /api/apu/1 HTTP/1.1" 404 -