19:07:39 - INFO - Iniciando aplicaci√≥n en modo: development
19:07:39 - INFO - Iniciando aplicaci√≥n en modo: development
19:07:39 - INFO - Configuraci√≥n cargada exitosamente desde config.json
19:07:39 - INFO - Configuraci√≥n cargada exitosamente desde config.json
19:07:39 - INFO - Iniciando carga de artefactos de b√∫squeda sem√°ntica...
19:07:39 - INFO - Iniciando carga de artefactos de b√∫squeda sem√°ntica...
19:07:39 - ERROR - ‚ùå Error cr√≠tico al cargar artefactos de b√∫squeda sem√°ntica: Error in faiss::Index* faiss::read_index(faiss::IOReader*, int) at /home/runner/miniconda3/conda-bld/faiss-pkg_1728491153420/work/faiss/impl/index_read.cpp:535: Error: 'ret == (1)' failed: read error in /home/gerardo/Documentos/GitHub/apu_filter/app/embeddings/faiss.index: 0 != 1 (Success)
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/app.py", line 355, in load_semantic_search_artifacts
    app.config["FAISS_INDEX"] = faiss.read_index(str(index_path))
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/faiss/swigfaiss.py", line 11280, in read_index
    return _swigfaiss.read_index(*args)
RuntimeError: Error in faiss::Index* faiss::read_index(faiss::IOReader*, int) at /home/runner/miniconda3/conda-bld/faiss-pkg_1728491153420/work/faiss/impl/index_read.cpp:535: Error: 'ret == (1)' failed: read error in /home/gerardo/Documentos/GitHub/apu_filter/app/embeddings/faiss.index: 0 != 1 (Success)
19:07:39 - ERROR - ‚ùå Error cr√≠tico al cargar artefactos de b√∫squeda sem√°ntica: Error in faiss::Index* faiss::read_index(faiss::IOReader*, int) at /home/runner/miniconda3/conda-bld/faiss-pkg_1728491153420/work/faiss/impl/index_read.cpp:535: Error: 'ret == (1)' failed: read error in /home/gerardo/Documentos/GitHub/apu_filter/app/embeddings/faiss.index: 0 != 1 (Success)
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/app.py", line 355, in load_semantic_search_artifacts
    app.config["FAISS_INDEX"] = faiss.read_index(str(index_path))
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/faiss/swigfaiss.py", line 11280, in read_index
    return _swigfaiss.read_index(*args)
RuntimeError: Error in faiss::Index* faiss::read_index(faiss::IOReader*, int) at /home/runner/miniconda3/conda-bld/faiss-pkg_1728491153420/work/faiss/impl/index_read.cpp:535: Error: 'ret == (1)' failed: read error in /home/gerardo/Documentos/GitHub/apu_filter/app/embeddings/faiss.index: 0 != 1 (Success)
19:07:39 - WARNING - La funcionalidad de b√∫squeda sem√°ntica estar√° desactivada.
19:07:39 - WARNING - La funcionalidad de b√∫squeda sem√°ntica estar√° desactivada.
 * Serving Flask app 'app.app:create_app('development')'
 * Debug mode: off
19:07:39 - INFO - WARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.
 * Running on http://127.0.0.1:5002
19:07:39 - INFO - Press CTRL+C to quit
19:07:58 - INFO - 127.0.0.1 - - [12/Nov/2025 19:07:58] "GET / HTTP/1.1" 200 -
19:08:15 - INFO - Procesando archivos para sesi√≥n TUVRNdhk...
19:08:15 - INFO - Procesando archivos para sesi√≥n TUVRNdhk...
19:08:15 - INFO - ================================================================================
19:08:15 - INFO - üöÄ Iniciando procesamiento de archivos con patr√≥n pipeline...
19:08:15 - INFO - ================================================================================
19:08:15 - INFO - üîÑ Ejecutando pipeline de procesamiento...
19:08:15 - INFO - Cargando datos desde /home/gerardo/Documentos/GitHub/apu_filter/uploads/TUVRNdhkYDOAuRVGJhnCLgGisLMuYUWOCG-bWYX-rSY/presupuesto.csv (formato: .csv)
19:08:15 - INFO - Cargando CSV desde /home/gerardo/Documentos/GitHub/apu_filter/uploads/TUVRNdhkYDOAuRVGJhnCLgGisLMuYUWOCG-bWYX-rSY/presupuesto.csv con delimitador ';' y codificaci√≥n 'utf-8'
19:08:15 - ERROR - ‚ùå Error procesando presupuesto: C√≥digo vac√≠o despu√©s de limpieza. Original: '#' conten√≠a solo caracteres inv√°lidos
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 413, in process
    df = self._clean_and_convert_data(df)
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 481, in _clean_and_convert_data
    .apply(lambda code: clean_apu_code(
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/pandas/core/series.py", line 4935, in apply
    ).apply()
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/pandas/core/apply.py", line 1422, in apply
    return self.apply_standard()
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/pandas/core/apply.py", line 1502, in apply_standard
    mapped = obj._map_values(
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/pandas/core/base.py", line 925, in _map_values
    return algorithms.map_array(arr, mapper, na_action=na_action, convert=convert)
  File "/home/gerardo/miniconda3/envs/ap_filter_env/lib/python3.10/site-packages/pandas/core/algorithms.py", line 1743, in map_array
    return lib.map_infer(values, mapper, convert=convert)
  File "pandas/_libs/lib.pyx", line 2999, in pandas._libs.lib.map_infer
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 481, in <lambda>
    .apply(lambda code: clean_apu_code(
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/utils.py", line 750, in clean_apu_code
    raise ValueError(
ValueError: C√≥digo vac√≠o despu√©s de limpieza. Original: '#' conten√≠a solo caracteres inv√°lidos
19:08:15 - WARNING - ‚ö†Ô∏è  Se encontraron 54 insumos con descripciones normalizadas duplicadas. Se conservar√° el de mayor precio.
19:08:15 - INFO - ‚úÖ Insumos cargados: 115 insumos √∫nicos
19:08:15 - INFO - Starting line-by-line parsing of: apus.csv
19:08:15 - INFO - File read successfully with encoding: latin1
19:08:17 - INFO - Parsing complete. Extracted 981 raw records.
19:08:17 - INFO - Parser Lark inicializado con arquitectura de especialistas
19:08:17 - INFO - Iniciando procesamiento de 981 APUs con especialistas
19:08:17 - INFO - Procesados 100/981 APUs
19:08:17 - INFO - Procesados 200/981 APUs
19:08:17 - INFO - Procesados 300/981 APUs
19:08:17 - INFO - Procesados 400/981 APUs
19:08:17 - INFO - Procesados 500/981 APUs
19:08:17 - INFO - Procesados 600/981 APUs
19:08:17 - INFO - Procesados 700/981 APUs
19:08:17 - INFO - Procesados 800/981 APUs
19:08:17 - INFO - Procesados 900/981 APUs
19:08:17 - INFO - Procesamiento completado: 0 insumos extra√≠dos
19:08:17 - WARNING - No se encontraron insumos v√°lidos
19:08:17 - ERROR - ‚ùå DataFrame 'presupuesto' est√° vac√≠o o es None
19:08:17 - ERROR - ‚ùå Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 1390, in _do_processing
    final_context = pipeline.run(initial_context)
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 108, in run
    context = step.execute(context)
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/procesador_csv.py", line 301, in execute
    raise ValueError(error)
ValueError: DataFrame 'presupuesto' est√° vac√≠o o es None
19:08:17 - INFO - ================================================================================
19:08:17 - ERROR - Error de procesamiento: Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
19:08:17 - ERROR - Error de procesamiento: Error en el pipeline: DataFrame 'presupuesto' est√° vac√≠o o es None
19:08:17 - INFO - 127.0.0.1 - - [12/Nov/2025 19:08:17] "POST /upload HTTP/1.1" 500 -