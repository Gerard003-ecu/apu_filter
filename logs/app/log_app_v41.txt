INICIANDO GENERACI√ìN DE EMBEDDINGS
============================================================
2025-11-24 10:23:39 [INFO] __main__: Validaci√≥n completada: 146/146 filas v√°lidas
2025-11-24 10:23:39 [INFO] EmbeddingGenerator: Cargando modelo: paraphrase-multilingual-MiniLM-L12-v2
2025-11-24 10:23:39 [INFO] sentence_transformers.SentenceTransformer: Use pytorch device_name: cpu
2025-11-24 10:23:39 [INFO] sentence_transformers.SentenceTransformer: Load pretrained SentenceTransformer: paraphrase-multilingual-MiniLM-L12-v2
2025-11-24 10:23:50 [INFO] EmbeddingGenerator: Modelo cargado. Dimensi√≥n: 384
2025-11-24 10:23:50 [INFO] EmbeddingGenerator: Generando embeddings para 146 textos...
Batches: 100%|‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 1/1 [00:32<00:00, 32.85s/it]
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: Construyendo √≠ndice FAISS...
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: √çndice construido. Vectores: 146
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: ============================================================
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: Iniciando validaci√≥n robusta del √≠ndice FAISS...
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 99
   √çndice retornado (Top 1): 130 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 34
   √çndice retornado (Top 1): 118 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 3/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 98
   √çndice retornado (Top 1): 129 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 20
   √çndice retornado (Top 1): 116 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 93
   √çndice retornado (Top 1): 124 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 96
   √çndice retornado (Top 1): 127 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 92
   √çndice retornado (Top 1): 123 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 30
   √çndice retornado (Top 1): 35 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 103
   √çndice retornado (Top 1): 134 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 102
   √çndice retornado (Top 1): 133 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 58
   √çndice retornado (Top 1): 63 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 32
   √çndice retornado (Top 1): 37 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 39
   √çndice retornado (Top 1): 118 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 25
   √çndice retornado (Top 1): 27 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 89
   √çndice retornado (Top 1): 120 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 101
   √çndice retornado (Top 1): 132 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 88
   √çndice retornado (Top 1): 119 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 82
   √çndice retornado (Top 1): 85 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 19
   √çndice retornado (Top 1): 115 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 33
   √çndice retornado (Top 1): 38 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 21
   √çndice retornado (Top 1): 117 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 94
   √çndice retornado (Top 1): 125 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 55
   √çndice retornado (Top 1): 60 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  Duplicado detectado (√çndice correcto encontrado):
   √çndice esperado: 31
   √çndice retornado (Top 1): 36 (Similitud: 1.000000)
   √çndice correcto en posici√≥n: 2/5 (Similitud: 1.000000)
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: ============================================================
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: üìä Resultados de Validaci√≥n:
2025-11-24 10:24:23 [INFO] EmbeddingGenerator:    Total muestras: 100
2025-11-24 10:24:23 [INFO] EmbeddingGenerator:    ‚úÖ Coincidencias exactas: 76 (76.0%)
2025-11-24 10:24:23 [INFO] EmbeddingGenerator:    ‚ö†Ô∏è  Duplicados sem√°nticos: 24 (24.0%)
2025-11-24 10:24:23 [INFO] EmbeddingGenerator:    ‚ùå Fallos reales: 0 (0.0%)
2025-11-24 10:24:23 [WARNING] EmbeddingGenerator: ‚ö†Ô∏è  ADVERTENCIA: Se detectaron 24 duplicados.
   El sistema funciona, pero considera limpiar tus datos de APUs duplicados.
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: ‚úÖ Validaci√≥n EXITOSA (tasa de √©xito funcional: 100.00%)
2025-11-24 10:24:23 [INFO] EmbeddingGenerator: ============================================================
2025-11-24 10:24:23 [INFO] __main__: Backup creado: app/embeddings/faiss_backup_20251124_102423.index
2025-11-24 10:24:23 [INFO] __main__: Backup creado: app/embeddings/id_map_backup_20251124_102423.json
2025-11-24 10:24:23 [INFO] __main__: Backup creado: app/embeddings/metadata_backup_20251124_102423.json
2025-11-24 10:24:23 [INFO] EmbeddingPipeline: Guardando √≠ndice FAISS: app/embeddings/faiss.index
2025-11-24 10:24:23 [INFO] EmbeddingPipeline: Guardando mapeo de IDs: app/embeddings/id_map.json
2025-11-24 10:24:23 [INFO] EmbeddingPipeline: Guardando metadata: app/embeddings/metadata.json
2025-11-24 10:24:23 [INFO] EmbeddingPipeline: ============================================================
‚úÖ PROCESO COMPLETADO EXITOSAMENTE
============================================================

üìä Resumen de M√©tricas: {
  "processing_time": 43.99019742012024,
  "initial_rows": 146,
  "valid_rows": 146,
  "embeddings_generated": 146,
  "embedding_dim": 384
}
(apu_filter_env) gerardo@gerardo-Satellite-C845:~/Documentos/GitHub/apu_filter$ python -m flask run --port=5002
10:35:57 [SYSTEM] - INFO - ============================================================
10:35:57 [SYSTEM] - INFO - Iniciando aplicaci√≥n en modo: DEFAULT
10:35:57 [SYSTEM] - INFO - ============================================================
10:35:57 [SYSTEM] - INFO - ‚úÖ Conexi√≥n a Redis exitosa: redis://127.0.0.1:6379/0
10:35:57 [SYSTEM] - INFO - ‚úÖ Configuraci√≥n cargada desde config.json
10:35:57 [SYSTEM] - INFO - APUPresenter inicializado correctamente
10:35:57 [SYSTEM] - INFO - Iniciando carga de artefactos de b√∫squeda sem√°ntica...
10:35:57 [SYSTEM] - ERROR - ‚ùå Error al cargar artefactos de b√∫squeda sem√°ntica: Metadata incompleta. Faltantes: vector_dimension, total_vectors
Traceback (most recent call last):
  File "/home/gerardo/Documentos/GitHub/apu_filter/app/app.py", line 915, in load_semantic_search_artifacts
    raise ValueError(
ValueError: Metadata incompleta. Faltantes: vector_dimension, total_vectors
10:35:57 [SYSTEM] - INFO - ‚úÖ Aplicaci√≥n inicializada exitosamente
10:35:57 [SYSTEM] - INFO - ============================================================
 * Debug mode: off
10:36:07 [SYSTEM] - INFO - üìä Telemetry for 8bcb48ae: {"request_id": "8bcb48ae", "steps": [], "metrics": {}, "errors": [], "total_duration_seconds": 0, "created_at": 5089.341865671, "age_seconds": 0.072692}
10:36:07 [SYSTEM] - INFO - üìä Telemetry for 1fc8af5c: {"request_id": "1fc8af5c", "steps": [], "metrics": {}, "errors": [], "total_duration_seconds": 0, "created_at": 5089.740525452, "age_seconds": 0.173178}
10:36:07 [SYSTEM] - INFO - üìä Telemetry for 5b717556: {"request_id": "5b717556", "steps": [], "metrics": {}, "errors": [], "total_duration_seconds": 0, "created_at": 5089.77869831, "age_seconds": 0.146717}
10:36:26 [c2936302] - INFO - üì§ Iniciando proceso de carga de archivos
10:36:26 [c2936302] - WARNING - Archivo 'apus' inv√°lido: ['Columnas faltantes: CODIGO_APU']
10:36:26 [SYSTEM] - INFO - üìä Telemetry for c2936302: {"request_id": "c2936302", "steps": [], "metrics": {}, "errors": [{"step": "upload_request_validation", "message": "Invalid file: apus", "timestamp": "2025-11-24T15:36:26.765211", "perf_counter": 5109.075732741}], "total_duration_seconds": 0, "created_at": 5108.569769244, "age_seconds": 0.514258, "active_timers": ["upload_request_validation"]}