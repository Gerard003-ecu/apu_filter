{
  "presupuesto_column_map": {
    "CODIGO_APU": ["ITEM"],
    "DESCRIPCION_APU": ["DESCRIPCION"],
    "CANTIDAD_PRESUPUESTO": ["CANT."]
  },
  "validation_thresholds": {
    "MANO_DE_OBRA": {
      "min_jornal": 50000,
      "max_jornal": 600000,
      "max_valor_total": 2000000
    },
    "EQUIPO": {
      "max_valor_total": 5000000
    },
    "DEFAULT": {
      "max_valor_total": 10000000
    }
  },
  "file_profiles": {
    "presupuesto_default": {
      "description": "Perfil para presupuesto CSV estándar.",
      "loader_params": {
        "header": 0,
        "sep": ";",
        "encoding": "UTF-8-SIG"
      }
    },
    "insumos_default": {
      "description": "Perfil para insumos jerárquicos.",
      "parser_strategy": "hierarchical_v1",
      "encoding": "UTF-8-SIG"
    },
    "apus_default": {
      "description": "Perfil para APUs semi-estructurados.",
      "parser_strategy": "state_machine_v2",
      "encoding": "utf-8"
    }
  },
  "clean_apu_code_params": {
    "presupuesto_item": {
      "min_length": 1,
      "max_length": 50,
      "replace_comma": true
    }
  },
  "apu_processor_rules": {
    "special_cases": {
      "TRANSPORTE": "TRANSPORTE",
      "SUMINISTRO": "SUMINISTRO",
      "ACARREO": "TRANSPORTE",
      "FLETE": "TRANSPORTE"
    },
    "mo_keywords": [
      "M.O.", "MANO DE OBRA", "OFICIAL", "AYUDANTE", "MAESTRO", "CUADRILLA"
    ],
    "equipo_keywords": [
      "EQUIPO", "HERRAMIENTA", "ANDAMIO", "MAQUINARIA"
    ]
  },
  "estimator_thresholds": {
    "min_semantic_similarity_suministro": 0.30,
    "min_semantic_similarity_tarea": 0.40,
    "min_keyword_match_percentage_cuadrilla": 50.0
  },
  "param_map": {
    "material": {
      "TST": "CANAL - SOLO LAMINA",
      "PANEL SANDWICH": "PANEL SANDWICH"
    },
    "tipo": {
      "CUBIERTA": "INSTALACION",
      "FACHADA": "INSTALACION"
    }
  },
  "min_score_threshold": 85,
  "estimator_rules": {
    "factores_zona": {
      "ZONA 0": 1.0,
      "ZONA 1": 1.05,
      "ZONA 2": 1.10,
      "ZONA 3": 1.15
    },
    "costo_adicional_izaje": {
      "MANUAL": 0,
      "GRUA": 5000
    },
    "factor_seguridad": {
      "NORMAL": 1.0,
      "ALTA": 1.15
    }
  },
  "keyword_maps": {
    "equipo": [
      "EQUIPO", "HERRAMIENTA", "RETROEXCAVADORA", "VOLQUETA",
      "MEZCLADORA", "VIBRADOR", "COMPACTADOR", "ANDAMIO",
      "FORMALETA", "ENCOFRADO", "MAQUINARIA", "VEHICULO",
      "CAMION", "GRUA", "BOMBA", "MARTILLO", "TALADRO",
      "SIERRA", "COMPRESOR", "PLANTA", "GENERADOR"
    ],
    "mano_de_obra": [
      "M.O.", "M O ", "MANO DE OBRA", "OFICIAL", "AYUDANTE",
      "MAESTRO", "CUADRILLA", "OBRERO", "CAPATAZ", "OPERARIO",
      "SISO", "INGENIERO", "TOPOGRAFO", "RESIDENTE", "PERSONAL",
      "JORNAL", "PEON", "ALBAÑIL", "ELECTRICISTA", "PLOMERO"
    ],
    "transporte": [
      "TRANSPORTE", "ACARREO", "FLETE", "VIAJE", "MOVILIZACION",
      "CAMIONETA", "VOLQUETA", "CARGA", "DESCARGA", "TRASLADO",
      "ENVIO", "DESPACHO"
    ],
    "suministro": [
      "SUMINISTRO", "TUBO", "TUBERIA", "ACCESORIO", "VALVULA",
      "MATERIAL", "CEMENTO", "ARENA", "GRAVA", "HIERRO", "ACERO",
      "ALAMBRE", "CABLE", "LADRILLO", "BLOQUE", "MADERA",
      "PINTURA", "PEGANTE", "TORNILLO", "CLAVO", "PIEDRA",
      "AGREGADO", "CONCRETO", "MALLA", "PERNO", "VARILLA"
    ]
  },
  "apu_classification_rules": [
    { "type": "Instalación", "condition": "porcentaje_mo_eq > 75.0" },
    { "type": "Suministro", "condition": "porcentaje_materiales > 75.0 and porcentaje_mo_eq < 15.0" },
    { "type": "Suministro (Pre-fabricado)", "condition": "porcentaje_materiales > 65.0 and porcentaje_mo_eq > 15.0" }
  ],
  "embedding_generation": {
    "model_name": "paraphrase-multilingual-MiniLM-L12-v2",
    "input_file": "data/processed_apus.json",
    "output_dir": "app/embeddings",
    "text_column": "original_description",
    "id_column": "CODIGO_APU",
    "max_batch_size": 512,
    "memory_limit_gb": 8.0
  }
}
